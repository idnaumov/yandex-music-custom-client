"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9489],{32017:function(e,t){t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var i={},o=e.split(n),s=(t||{}).decode||r,a=0;a<o.length;a++){var l=o[a],u=l.indexOf("=");if(!(u<0)){var d=l.substr(0,u).trim(),h=l.substr(++u,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==i[d]&&(i[d]=function(e,t){try{return t(e)}catch(t){return e}}(h,s))}}return i},t.serialize=function(e,t,r){var n=r||{},s=n.encode||i;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!o.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!o.test(a))throw TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(u)}if(n.domain){if(!o.test(n.domain))throw TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!o.test(n.path))throw TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;default:throw TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,i=encodeURIComponent,n=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},74963:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();t.hasCookies=function(){var e=new a;try{var t="__test";e.setItem(t,"1");var r=e.getItem(t);return e.removeItem(t),"1"===r}catch(e){return!1}};var o=(i=r(32017))&&i.__esModule?i:{default:i},s="lS_",a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this.cookieOptions=Object.assign({path:"/"},t),s=void 0===t.prefix?s:t.prefix}return n(e,[{key:"getItem",value:function(e){var t=o.default.parse(document.cookie);return t&&t.hasOwnProperty(s+e)?t[s+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=o.default.serialize(s+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=Object.assign({},this.cookieOptions,{maxAge:-1});return document.cookie=o.default.serialize(s+e,"",t),null}},{key:"clear",value:function(){var e=o.default.parse(document.cookie);for(var t in e)0===t.indexOf(s)&&this.removeItem(t.substr(s.length));return null}}]),e}();t.default=a},80392:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=i},8036:function(e,t,r){var i=s(r(98839)),n=s(r(74963)),o=s(r(80392));function s(e){return e&&e.__esModule?e:{default:e}}var a=null;a=(0,i.default)("localStorage")?window.localStorage:(0,i.default)("sessionStorage")?window.sessionStorage:(0,i.default)("cookieStorage")?new n.default:new o.default,t.ZP=a,i.default,n.default,o.default},98839:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return o("localStorage");if("session"===t)return o("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(74963),n="__test";function o(e){try{var t=window[e];return t.setItem(n,"1"),t.removeItem(n),!0}catch(e){return!1}}},49489:function(e,t,r){r.r(t),r.d(t,{HlsCoreAdapter:function(){return Y},YaspCoreAdapter:function(){return R},YaspLoader:function(){return O}});var i=r(58655);let n=()=>{},o=e=>!0,s="__VPUID_INLINE__",a="vpuid";var l=r(8036);let u={getItem(e){try{return l.ZP.getItem(e)}catch{return null}},setItem(e,t){try{l.ZP.setItem(e,t)}catch{}},removeItem(e){try{l.ZP.removeItem(e)}catch{}},clear(){try{l.ZP.clear()}catch{}}},d=!function(e,t=!1){if(!e)return!1;let r=t?Function.prototype.toString.call(e):e.toString?e.toString():"";return/\[native code\]/.test(r)||/\/\* source code not available \*\//.test(r)}(Math.random)||Math.random()===Math.random(),h={}.toString,m=/\[object (\w+)\]/,c=e=>{let t=h.call(e);if(!t)return null;let r=t.match(m);return r&&r[1]||null};function f(e){return"function"==typeof e||"Function"===c(e)}let v=Date&&f(Date.now)?()=>Date.now():()=>new Date().getTime(),p="undefined"==typeof window?void 0:window.performance,E=p&&f(p.now),g=p&&p.timing&&p.timing.navigationStart,y=p&&p.timeOrigin?p.timeOrigin:g?p.timing.navigationStart:v(),w=0,L=()=>w=Math.max(v()-y,w),S=v()*(E?()=>p.now():()=>L())()%2147483647,b=d?function(){return((S=16807*S%2147483647)-1)/2147483646}:function(){return Math.random()},_="qwertyuiopasdfghjklzxcvbnm0123456789",A=-1===s.indexOf("__VPUID")?s:u.getItem(a)??function(){let e=[];for(let t=0;t<10;t++)e.push(_[Math.floor(b()*_.length)]);return e.join("")}();async function k(e){let t=[["vpuid",A],["version",e?.version],["testid",isFinite(e.testid)?String(e.testid):void 0],["bundleurl",e?.bundleUrl]].filter(([e,t])=>!!t).map(e=>e.join("=")).join("&");try{var r,i,s;let a=e.hostname||"frontend.vh.yandex.ru",l=t?`?${t}`:"";await (r=`https://${a}/get_player/${e.file}${l}`,i=e.checkLoad,s={src:r,async:!1,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="use-credentials"},checkLoad:i},new Promise((e,t)=>{!function(e){let{dropCacheOnRetry:t=!1,onBeforeLoad:r=n,retries:i=0}=e;if(e.checkLoad&&e.checkLoad()){e.onLoad&&e.onLoad();return}let s=r,a=0;t&&i>0&&(s=e=>{if(r(e),a>0){var t;let r;let i=-1===e.src.indexOf("?")?"?":"&",n=(t=a,Number.isFinite(r=Math.floor(1e9*Math.random())%1e9)||(r=0),r+=Date.now()%1e9,String(t)+r.toString(36));e.src+=i+n}a++}),function e(t){let{src:r,win:i=window,charset:s="utf-8",async:a=!0,retries:l=0,onRetry:u=n,retryDelay:d=0,checkLoad:h=o,onBeforeLoad:m=n,onLoad:c=n,onError:f=n}=t,v=i.document.createElement("script"),p=i=>{l>0?(u(i),e({...t,src:r,retries:l-1})):f(i),v.parentNode?.removeChild(v)};v.type="text/javascript",v.async=a,v.onload=()=>h(v)?c():p(Error(`checkLoad for ${r} failed`)),v.onerror=e=>{try{i.setTimeout(()=>{p(e)},d)}catch{}},v.src=r,v.charset=s,m(v),(function(e){let t=e.document,r=t.getElementsByTagName("head")[0];return r||(r=t.createElement("head"),t.documentElement.appendChild(r)),r})(i).appendChild(v)}({...e,onBeforeLoad:s})}({...s,onLoad:e,onError:t})}))}catch(e){throw e}}function C(e){try{return e()}catch{return}}u.setItem(a,A);let H="object"==typeof self?self:window;async function P(e){if(C(()=>H.Ya)?.YaspVideoElement)return Promise.resolve();await k({file:"yasp.js",version:e?.version,testid:e?.testid,bundleUrl:e?.bundleUrl,checkLoad:()=>!!C(()=>H.Ya)?.preloadYaspScripts}),await H.Ya.preloadYaspScripts()}var I=r(46393);class O{loadYasp(e){return P({version:e}).then(()=>{this.isYaspLoaded=!0}).catch(e=>{let t=new I.y("[Sonata] Error in loading YASP",{code:"E_SONATA",cause:e});this.logger.error(t)})}attachYasp(e){let t=window.Ya.YaspAudioElement;if(!this.isYaspLoaded)throw new I.y("YaspAudioElement has not been loaded");t.isYaspAudioElement(e)||t.attach(e)}constructor({logger:e}){(0,i._)(this,"isYaspLoaded",!1),(0,i._)(this,"logger",void 0),this.logger=e}}var T=r(6981);class x{get source(){return this.audioElement}play(e){let{src:t,position:r}=e;return this.audioElement.src=t,this.audioElement.load(),this.audioElement.play().then(()=>{void 0!==r&&(this.audioElement.currentTime=r)})}setSrc(e){let{src:t,position:r}=e;this.audioElement.src=t,this.audioElement.load(),void 0!==r&&(this.audioElement.currentTime=r)}pause(){return this.audioElement.pause(),Promise.resolve()}resume(){return this.audioElement.play().then(()=>{this.emitter.emit("resume")})}setProgress(e){return this.audioElement.currentTime=e,Promise.resolve(this.audioElement.currentTime)}setVolume(e){return this.audioElement.volume=e,Promise.resolve(this.audioElement.volume)}setSpeed(e){return this.audioElement.defaultPlaybackRate=e,this.audioElement.playbackRate=e,Promise.resolve(this.audioElement.playbackRate)}stop(){return this.audioElement.removeAttribute("src"),this.audioElement.load(),Promise.resolve()}onAudioEnd(e){this.audioElement.addEventListener("ended",e)}onAudioPaused(e){this.audioElement.addEventListener("pause",e)}onAudioResume(e){this.emitter.on("resume",e)}onAudioUpdatingProgress(e){this.audioElement.addEventListener("timeupdate",this.progressHandler),this.audioElement.addEventListener("durationchange",this.progressHandler),this.emitter.on("update_progress",e)}progressHandler(){let e=isNaN(this.audioElement.duration)?0:this.audioElement.duration,t=this.audioElement.currentTime,r=this.audioElement.buffered.length?this.audioElement.buffered.end(this.audioElement.buffered.length-1):0;this.emitter.emit("update_progress",{duration:e,position:t,loaded:r})}onAudioSeeked(e){this.audioElement.addEventListener("seeked",e)}onAudioStalled(e){this.audioElement.addEventListener("stalled",e)}onAudioCanplay(e){this.audioElement.addEventListener("canplay",e)}onAudioPlaying(e){this.audioElement.addEventListener("playing",e)}onAudioError(e){this.audioElement.addEventListener("error",this.audioErrorHandler),this.emitter.on("error",e)}onAudioVolumeChange(e){this.audioElement.addEventListener("volumechange",this.volumeChangeHandler),this.emitter.on("volumechange",e)}volumeChangeHandler(){this.emitter.emit("volumechange",this.audioElement.volume)}onAudioSpeedChange(e){this.audioElement.addEventListener("ratechange",this.speedChangeHandler),this.emitter.on("ratechange",e)}speedChangeHandler(){this.emitter.emit("ratechange",this.audioElement.playbackRate)}audioErrorHandler(e){this.emitter.emit("error",e)}offAudioEnd(e){this.audioElement.removeEventListener("ended",e)}offAudioPaused(e){this.audioElement.removeEventListener("pause",e)}offAudioResume(e){this.emitter.off("resume",e)}offAudioUpdatingProgress(e){this.audioElement.removeEventListener("timeupdate",this.progressHandler),this.audioElement.removeEventListener("durationchange",this.progressHandler),this.emitter.off("update_progress",e)}offAudioSeeked(e){this.audioElement.removeEventListener("seeked",e)}offAudioStalled(e){this.audioElement.removeEventListener("stalled",e)}offAudioCanplay(e){this.audioElement.removeEventListener("canplay",e)}offAudioPlaying(e){this.audioElement.removeEventListener("playing",e)}offAudioError(e){this.audioElement.removeEventListener("error",e)}offAudioVolumeChange(e){this.audioElement.removeEventListener("volumechange",this.volumeChangeHandler),this.emitter.off("volumechange",e)}offAudioSpeedChange(e){this.audioElement.removeEventListener("ratechange",this.speedChangeHandler),this.emitter.off("ratechange",e)}constructor(){(0,i._)(this,"audioElement",document.createElement("audio")),(0,i._)(this,"emitter",new T.v),this.audioElement.autoplay=!1,this.audioElement.loop=!1,this.audioElement.preload="auto",this.audioElement.crossOrigin="anonymous",this.progressHandler=this.progressHandler.bind(this),this.volumeChangeHandler=this.volumeChangeHandler.bind(this),this.speedChangeHandler=this.speedChangeHandler.bind(this),this.audioErrorHandler=this.audioErrorHandler.bind(this)}}class R extends x{play(e){let{src:t,position:r,key:i}=e;return void 0!==i&&window.Ya.YaspAudioElement.configureSource(t,{audioDecodingKey:i}),this.audioElement.src=t,this.audioElement.play().then(()=>{void 0!==r&&(this.audioElement.currentTime=r)})}setSrc(e){let{src:t,position:r,key:i}=e;void 0!==i&&window.Ya.YaspAudioElement.configureSource(t,{audioDecodingKey:i}),this.audioElement.src=t,void 0!==r&&(this.audioElement.currentTime=r)}}var M=r(38168);class Y extends x{play(e){let{src:t}=e;return this.hls||this.initHls(),this.stop(),this.load(t).then(()=>this.audioElement.play())}stop(){return this.removeAllHlsEvents(),this.hls&&(this.hls.stopLoad(),this.hls.media&&this.hls.detachMedia()),this.audioElement.removeAttribute("src"),this.audioElement.load(),Promise.resolve()}initHls(){this.hls||(this.hls=new M.ZP({liveDurationInfinity:!0,maxBufferSize:3e6}),this.setErrorListener(this.errorListener))}load(e){if(!this.hls)return Promise.resolve();let t=function(e){let t="";for(;t.length<44;)t+=(Math.random()+1).toString(36).substring(3);t=t.slice(0,44);let r=e.toString().slice(0,10);return"".concat(t,"xWEBx0001x").concat(r)}(this.playerInitializationTime),r="".concat(e,"?vsid=").concat(t);return this.hls.attachMedia(this.audioElement),this.hls.loadSource(r),new Promise(e=>{this.addOnceHlsEvent(M.zW.MANIFEST_PARSED,()=>{this.hls&&this.hls.startLoad()}),this.addOnceHlsEvent(M.zW.MEDIA_ATTACHED,()=>{e()})})}destroyHls(){this.retryCounter=0,this.removeErrorListener(),this.removeAllHlsEvents(),this.hls&&(this.stop(),this.hls.destroy(),this.hls=null)}addOnceHlsEvent(e,t){this.hls&&(this.hls.once(e,t),this.hlsListeners.push({event:e,listener:t,once:!0}))}removeAllHlsEvents(){this.hlsListeners.forEach(e=>{this.hls&&this.hls.off(e.event,e.listener,void 0,e.once)}),this.hlsListeners=[]}errorListener(e,t){if(this.hls)switch(t.type){case M.ZB.NETWORK_ERROR:if(this.retryCounter++,this.retryCounter>this.hlsErrorRetryLimit){this.destroyHls();let e=new I.y("HLS error",{data:t});this.emitter.emit("error",e)}else this.hls.startLoad();break;case M.ZP.ErrorTypes.MEDIA_ERROR:this.hls.recoverMediaError();break;default:this.destroyHls(),this.emitter.emit("error",new I.y("HLS error",{data:t}))}}setErrorListener(e){this.removeErrorListener(),this.hls&&(this.hlsJsErrorListener=e,this.hls.on(M.zW.ERROR,e))}removeErrorListener(){this.hls&&this.hlsJsErrorListener&&this.hls.off(M.zW.ERROR,this.hlsJsErrorListener),this.hlsJsErrorListener=null}constructor(e){super(),(0,i._)(this,"hls",null),(0,i._)(this,"retryCounter",0),(0,i._)(this,"hlsErrorRetryLimit",void 0),(0,i._)(this,"playerInitializationTime",Date.now()),(0,i._)(this,"hlsJsErrorListener",null),(0,i._)(this,"hlsListeners",[]),this.hlsErrorRetryLimit=e.hlsErrorRetryLimit,this.errorListener=this.errorListener.bind(this),this.initHls()}}}}]);