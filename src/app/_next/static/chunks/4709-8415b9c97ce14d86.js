(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4709],{48896:function(e,i,t){"use strict";t.d(i,{wV:function(){return v.AlbumEntityNameConsumer},KX:function(){return x},gI:function(){return P},lf:function(){return a},N:function(){return u},hh:function(){return c},Vt:function(){return d.useAlbumAnalyticsAppScreenName},jV:function(){return m.useAlbumDisclaimer},H0:function(){return v.useAlbumEntityName},ap:function(){return b.useMarkAlbumListenedClick},SB:function(){return p.useOnLikeClick},BV:function(){return A.useOnPinClick},IK:function(){return C.useOnPresaveClick}});var r,n,a,s,l=t(2685),o=t(56198);let u=e=>{let i=(0,o.GFX)(e.trailer);return(0,l.pj)({id:e.id,title:e.title,coverUri:e.coverUri,type:e.type,year:e.year,version:e.version,contentWarning:e.contentWarning,genre:e.genre,likesCount:e.likesCount,averageColor:(0,o.Usz)(e.derivedColors),isAvailable:!!e.available,trackPosition:e.trackPosition,disclaimers:e.disclaimers,trackCount:e.trackCount,availableForPremiumUsers:e.availableForPremiumUsers,availableForOptions:e.availableForOptions||[],bestAlbumTracks:e.bests,durationSec:e.durationSec,trailer:i,listeningFinished:!!e.listeningFinished})},c=e=>{let i=!1;return e.presaveDate?i=!0:e.presaved&&(i=e.presaved),(0,l.pj)({id:e.id,contentWarning:e.contentWarning,disclaimers:e.disclaimers,isPresave:i,title:e.title,type:e.type,coverUri:e.coverUri,releaseDate:e.releaseDate})};(r=a||(a={})).TRACK="track",r.TEXT="text";var d=t(56307),m=t(17983),v=t(13508),b=t(27066),p=t(54323),A=t(65826),C=t(57134),h=t(52416);(n=s||(s={})).KIDS="kids",n.BOOKMATE="bookmate";var g=t(27980),_=t(19522),k=t(83768),f=t(91694);let y=l.V5.model("TrackPosition",{volume:l.V5.number,index:l.V5.number}),x=l.V5.compose(l.V5.model({id:l.V5.number,title:l.V5.string,type:l.V5.maybe(l.V5.enumeration(Object.values(h.V))),coverUri:l.V5.maybe(l.V5.string),averageColor:l.V5.maybe(l.V5.string),year:l.V5.maybe(l.V5.number),version:l.V5.maybe(l.V5.string),isAvailable:l.V5.optional(l.V5.boolean,!0),availableForOptions:l.V5.maybe(l.V5.array(l.V5.enumeration(Object.values(s)))),availableForPremiumUsers:l.V5.maybe(l.V5.boolean),bookmateOptionRequired:l.V5.maybe(l.V5.boolean),genre:l.V5.maybe(l.V5.string),trackPosition:l.V5.maybe(y),disclaimers:l.V5.maybe(l.V5.array(l.V5.string)),trackCount:l.V5.maybe(l.V5.number),bestAlbumTracks:l.V5.maybe(l.V5.array(l.V5.number)),trailer:l.V5.maybe(f.K8),durationSec:l.V5.maybe(l.V5.number),listeningFinished:l.V5.maybe(l.V5.boolean)}),f.fE,f.ie).views(e=>({get url(){return"/album/".concat(e.id)},get isLiked(){if(!(0,l.fh)(e))return!1;let{library:i}=(0,l.yj)(e);return null==i?void 0:i.isAlbumLiked(e.id)},get pinId(){return"".concat(g.Q.ALBUM_ITEM).concat(e.id)},get seeds(){return["album:".concat(e.id)]},get isAlbum(){return e.type===h.V.ALBUM||e.type===h.V.SINGLE},get isPodcast(){return e.type===h.V.PODCAST},get isAudiobook(){return e.type===h.V.AUDIOBOOK},get isFairyTale(){return e.type===h.V.FAIRY_TALE},get isNonMusic(){return this.isAudiobook||this.isPodcast||this.isFairyTale},get isPinned(){if(!(0,l.fh)(e))return!1;let{pinsCollection:i}=(0,l.yj)(e);return i.isPinned(this.pinId)},get newModalDisclaimerId(){if(e.disclaimers){var i;let t=null===(i=(0,o.V4d)(e.disclaimers,_.e.MODAL))||void 0===i?void 0:i[0];if(t){let{id:e}=t;return e}}return null},get isForeignAgent(){var t,r;if(!(0,l.fh)(e))return!1;let{experiments:i}=(0,l.yj)(e),n=i.checkExperiment(o.peG.WebNextNewExplicitApiModalFA,"on"),a=!!(null===(t=e.disclaimers)||void 0===t?void 0:t.includes(_.e.FOREIGN_AGENT));if(n&&e.disclaimers){let i=null===(r=(0,o.V4d)(e.disclaimers,_.e.FOREIGN_AGENT))||void 0===r?void 0:r[0];a=(null==i?void 0:i.type)===_.e.FOREIGN_AGENT}return a&&i.checkExperiment(o.peG.WebNextAgentPodcast,"on")},get isLegalRejected(){if(!(0,l.fh)(e))return!1;let{experiments:i}=(0,l.yj)(e),t=i.checkExperiment(o.peG.WebNextNewExplicitApiModalFA,"on");if(e.disclaimers){var n;let i=null===(n=(0,o.V4d)(e.disclaimers,_.e.MODAL))||void 0===n?void 0:n[0],r=t&&(null==i?void 0:i.type)===_.e.MODAL;return!e.isAvailable&&(r||e.disclaimers.includes(_.e.MODAL))}return!1},get isUnsafeLegal(){if(!(0,l.fh)(e))return!1;let{experiments:i}=(0,l.yj)(e),t=i.checkExperiment(o.peG.WebNextLegalUnsafeAlbum,"on"),r=i.checkExperiment(o.peG.WebNextNewExplicitApiModalFA,"on");if(e.disclaimers&&r){var a;let i=null===(a=(0,o.V4d)(e.disclaimers,_.e.MODAL))||void 0===a?void 0:a[0];return e.isAvailable&&(null==i?void 0:i.type)===_.e.MODAL}if(e.disclaimers&&t)return e.isAvailable&&e.disclaimers.includes(_.e.MODAL);return!1},get isAvailableOnlyForPlus(){var u;return!e.isAvailable&&(e.availableForPremiumUsers||!!(null===(u=e.availableForOptions)||void 0===u?void 0:u.includes(s.BOOKMATE)))},get shouldShowBooksBadge(){var c;return!!(e.bookmateOptionRequired||!e.availableForPremiumUsers&&(null===(c=e.availableForOptions)||void 0===c?void 0:c.includes(s.BOOKMATE)))}})).actions(e=>({toggleLike:(0,l.ls)(function*(){if(!(0,l.fh)(e))return;let{library:i,user:t}=(0,l.yj)(e);if(t.isAuthorized){let r=yield i.toggleAlbumLike({entityId:e.id,userId:t.account.uid});return(0,l.fh)(e)&&r===k.B.OK&&(e.isLiked?e.likePending():e.unlikePending()),r}}),togglePin:(0,l.ls)(function*(){if(!(0,l.fh)(e))return;let{pinsCollection:i,user:t}=(0,l.yj)(e);if(t.isAuthorized)return yield i.toggleAlbumPin({id:e.id},e.pinId)}),getKey:i=>"".concat(i,"_").concat(e.id),updateFinished:i=>{e.listeningFinished=i}})).named("BaseAlbum");var V=t(81891);let P=l.V5.compose(l.V5.model("BaseUpcomingAlbum",{id:l.V5.number,isPresave:l.V5.boolean,title:l.V5.maybe(l.V5.string),type:l.V5.maybe(l.V5.enumeration(Object.values(h.V))),coverUri:l.V5.maybe(l.V5.string),releaseDate:l.V5.maybe(l.V5.string)}),f.ie).actions(e=>{let i={presaveAlbum:(0,l.ls)(function*(i){let{usersResource:t,modelActionsLogger:r}=(0,l.dU)(e);try{e.isPresave=!0;let r=yield t.presaveAlbum(i);return r===V.Z.ERROR&&(e.isPresave=!1),r}catch(i){return e.isPresave=!1,r.error(i),V.Z.ERROR}}),removePresaveAlbum:(0,l.ls)(function*(i){let{usersResource:t,modelActionsLogger:r}=(0,l.dU)(e);try{e.isPresave=!1;let r=yield t.removePresaveAlbum(i);return r===V.Z.ERROR&&(e.isPresave=!0),r}catch(i){return e.isPresave=!0,r.error(i),V.Z.ERROR}}),toggleLike:(0,l.ls)(function*(){let t;if(!(0,l.fh)(e))return;let{user:r}=(0,l.yj)(e);if(r.account.uid)return t=e.isPresave?yield i.removePresaveAlbum({albumId:e.id,userId:r.account.uid}):yield i.presaveAlbum({albumId:e.id,userId:r.account.uid,likeAfterRelease:!0}),(0,l.fh)(e),t}),getKey:i=>"".concat(i,"_").concat(e.id)};return i})},56307:function(e,i,t){"use strict";t.d(i,{useAlbumAnalyticsAppScreenName:function(){return l}});var r=t(91207),n=t(3283),a=t(52416),s=t(56198);let l=e=>{let i=(0,s.RVp)();return(0,r.useMemo)(()=>{if(!i)return n.qU.AlbumScreen;switch(e){case a.V.PODCAST:return n.qU.PodcastScreen;case a.V.AUDIOBOOK:return n.qU.AudiobookScreen;default:return n.qU.AlbumScreen}},[e,i])}},17983:function(e,i,t){"use strict";t.d(i,{useAlbumDisclaimer:function(){return s}});var r=t(91207),n=t(10231),a=t(56198);let s=e=>{let{album:i,callback:t,shouldHistoryBack:s}=e,{disclaimer:l,modals:{disclaimerModal:o}}=(0,a.oR4)(),u=(0,r.useRef)(String((0,n.Z)())),c=(0,r.useRef)(!1),d=(0,a.uK4)().get(a.ceh);return(0,r.useEffect)(()=>{l.isUnsafeDisclaimerConfirmed&&l.id===u.current&&!c.current&&(null==t||t(),c.current=!0)},[t,l.isUnsafeDisclaimerConfirmed,l.id]),(0,r.useCallback)(async e=>{let r=d.get(a.BUb.ExEx),n=(null==i?void 0:i.isPodcast)?null==r?void 0:r.includes("".concat(a.coP.PODCAST,"_").concat(i.id)):null==r?void 0:r.includes("".concat(a.coP.ALBUM,"_").concat(null==i?void 0:i.id));if((null==i?void 0:i.isUnsafeLegal)&&n){null==t||t();return}if((null==i?void 0:i.isLegalRejected)||(null==i?void 0:i.isUnsafeLegal)){null==e||e.preventDefault(),await l.getDisclaimerData({entityId:i.id,entityType:i.isPodcast?a.coP.PODCAST:a.coP.ALBUM,newDisclaimerId:i.newModalDisclaimerId}),i.isUnsafeLegal&&l.setType(a.Gq.UNSAFE),l.setId(u.current),l.setEntityId(i.id),i.isPodcast?l.setEntityType(a.coP.PODCAST):l.setEntityType(a.coP.ALBUM),l.setShouldHistoryBack(!!s),c.current=!1,o.open();return}null==e||e.preventDefault(),null==t||t()},[null==i?void 0:i.id,null==i?void 0:i.isLegalRejected,null==i?void 0:i.isPodcast,null==i?void 0:i.isUnsafeLegal,null==i?void 0:i.newModalDisclaimerId,t,l,o,d,s])}},13508:function(e,i,t){"use strict";t.d(i,{AlbumEntityNameConsumer:function(){return r},useAlbumEntityName:function(){return o}});var r,n=t(91207),a=t(37184),s=t(52416),l=t(56198);(r||(r={})).PIN="pin";let o=(e,i)=>{let{formatMessage:t}=(0,a.Z)(),r=(0,l.RVp)();return(0,n.useMemo)(()=>{if(!r)return e===s.V.SINGLE?t({id:"entity-names.single"}):t({id:"entity-names.album"});switch(e){case s.V.SINGLE:return t({id:"entity-names.single"});case s.V.PODCAST:return t({id:"entity-names.podcast"});case s.V.AUDIOBOOK:if("pin"===i)return t({id:"entity-names.book"});return t({id:"entity-names.audio"});case s.V.FAIRY_TALE:return t({id:"entity-names.fairy-tale"});default:return t({id:"entity-names.album"})}},[e,t,r,i])}},27066:function(e,i,t){"use strict";t.d(i,{useMarkAlbumListenedClick:function(){return l}});var r=t(91207),n=t(37184),a=t(26157),s=t(56198);let l=()=>{let{user:e,album:i}=(0,s.oR4)(),{notify:t}=(0,s.d$W)(),{formatMessage:l}=(0,n.Z)();return(0,r.useCallback)(async()=>{if(i){var r,n;let o;if(!e.isAuthorized){t(l({id:"authorization-messages.need-to-authorizate"}),{containerId:s.W$x.ERROR});return}let u=null===(r=i.meta)||void 0===r?void 0:r.listeningFinished;u?(o=await i.markUnfinished({albumId:Number(i.id)}),i.setAllTracksUnfinished(!0)):o=await i.markFinished({albumId:Number(i.id)}),o!==a.P.OK?t(l({id:"error-messages.error-during-action"}),{containerId:s.W$x.ERROR}):null===(n=i.meta)||void 0===n||n.updateFinished(!u)}},[l,t,i,e.isAuthorized])}},49283:function(e,i,t){"use strict";t.d(i,{C:function(){return s}});var r=t(52416),n=t(56198),a=t(29778);let s=e=>{if(!(0,n.RVp)())return a.j9.ALBUM;switch(e.type){case r.V.PODCAST:return a.j9.PODCAST;case r.V.AUDIOBOOK:return a.j9.AUDIOBOOK;default:return a.j9.ALBUM}}},54323:function(e,i,t){"use strict";t.d(i,{useOnLikeClick:function(){return A}});var r=t(65301),n=t(79491),a=t(91207),s=t(37184),l=t(83768),o=t(56198),u=t(29778),c=t(96233),d=t(49283),m=t(52416);let v="/collection/albums",b=e=>{if(!(0,o.RVp)())return v;switch(e.type){case m.V.PODCAST:case m.V.AUDIOBOOK:return"/collection/non-music/liked";default:return v}},p=(0,c.Pi)(e=>{let{album:i,closeToast:t}=e,n=b(i),a=(0,d.C)(i);return(0,r.jsx)(u.AP,{closeToast:t,entityVariant:a,coverUri:i.coverUri,entityUrl:"/album/".concat(i.id),collectionUrl:n,entityTitle:i.title,isLiked:i.isLiked})}),A=e=>{let{user:i}=(0,o.oR4)(),{notify:t}=(0,o.d$W)(),[c,d]=(0,a.useState)(!1),{formatMessage:m}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!e)return;if(!i.isAuthorized){t((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isLiked:!e.isLiked};d(!0);let s=await e.toggleLike();d(!1),s===l.B.OK?t((0,r.jsx)(p,{album:a}),{containerId:o.W$x.INFO}):t((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[i.isAuthorized,c,e,m,t])}},65826:function(e,i,t){"use strict";t.d(i,{useOnPinClick:function(){return m}});var r=t(65301),n=t(79491),a=t(91207),s=t(37184),l=t(56198),o=t(29778),u=t(96233),c=t(49283);let d=(0,u.Pi)(e=>{let{album:i,closeToast:t}=e,n=(0,c.C)(i);return(0,r.jsx)(o.K1,{closeToast:t,entityVariant:n,coverUri:i.coverUri,entityUrl:"/album/".concat(i.id),entityTitle:i.title,isPinned:i.isPinned})}),m=e=>{let{user:i}=(0,l.oR4)(),{notify:t}=(0,l.d$W)(),{formatMessage:u}=(0,s.Z)(),[c,m]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!i.isAuthorized){t((0,r.jsx)(o.Q,{error:u({id:"authorization-messages.need-to-authorizate"})}),{containerId:l.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isPinned:!e.isPinned};m(!0);let s=await e.togglePin();m(!1),s?t((0,r.jsx)(d,{album:a}),{containerId:l.W$x.INFO}):t((0,r.jsx)(o.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:l.W$x.ERROR})},[e,u,t,c,i.isAuthorized])}},57134:function(e,i,t){"use strict";t.d(i,{useOnPresaveClick:function(){return d}});var r=t(65301),n=t(79491),a=t(91207),s=t(37184),l=t(81891),o=t(56198),u=t(29778);let c=e=>{let{upcomingAlbum:i,closeToast:t}=e;return(0,r.jsx)(u.V1,{closeToast:t,albumTitle:i.title,coverUri:i.coverUri,entityTitle:i.title,isPresave:i.isPresave})},d=e=>{let{user:i}=(0,o.oR4)(),{notify:t}=(0,o.d$W)(),[d,m]=(0,a.useState)(!1),{formatMessage:v}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!i.isAuthorized){t((0,r.jsx)(u.Q,{error:v({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(d)return;let a={...(0,n.ZN)(e),isPresave:!e.isPresave};m(!0);let s=await e.toggleLike();m(!1),s===l.Z.OK?t((0,r.jsx)(c,{upcomingAlbum:a}),{containerId:o.W$x.INFO}):t((0,r.jsx)(u.Q,{error:v({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[i.isAuthorized,d,e,t,v])}},49724:function(e,i,t){"use strict";t.d(i,{kL:function(){return l.Chart},BH:function(){return s},W5:function(){return n}});var r=t(2685);let n=e=>(0,r.pj)({position:e.position,progress:e.progress});var a=t(43068);let s=r.V5.model("Chart",{position:r.V5.maybe(r.V5.number),progress:r.V5.maybe(r.V5.enumeration(Object.values(a.h)))});var l=t(74539)},74539:function(e,i,t){"use strict";t.d(i,{Chart:function(){return b}});var r=t(65301),n=t(9695),a=t(96233),s=t(91207),l=t(37184),o=t(55975),u=t(43068),c=t(82036),d=t(81437),m=t(82605),v=t.n(m);let b=(0,a.Pi)(e=>{let{progress:i,withIcon:t,position:a,weight:m="normal",isDisliked:b,isDisabled:p,className:A,positionClassName:C}=e,{formatMessage:h}=(0,l.Z)(),g=i||t,_=(0,s.useMemo)(()=>{switch(i){case u.h.UP:return"chartUp";case u.h.DOWN:return"chartDown";case u.h.NEW:return"chartNew";default:return"chartSame"}},[i]),k=(0,s.useMemo)(()=>{switch(i){case u.h.UP:return h({id:"entity-names.chart-up"});case u.h.DOWN:return h({id:"entity-names.chart-down"});case u.h.NEW:return h({id:"entity-names.chart-new"});default:return h({id:"entity-names.chart-same"})}},[h,i]);return(0,r.jsxs)("div",{className:(0,n.W)(v().root,A),...(0,o.BA)(o.FK.chart.CHART_PROGRESS),children:[(0,r.jsx)(d.Caption,{variant:"div",weight:m,type:"entity",size:"m",className:(0,n.W)(v().position,C,{[v().position_disliked]:b,[v().position_disabled]:p}),children:a}),g&&(0,r.jsx)(c.Icon,{variant:_,size:"xxs","aria-label":k,className:(0,n.W)(v().progress,v()["progress_".concat(i)],{[v().progress_disliked]:b,[v().progress_disabled]:p}),...(0,o.BA)(o.FK.chart.CHART_PROGRESS_ICON)})]})})},54709:function(e,i,t){"use strict";t.d(i,{rf:function(){return h.AlbumCard},oK:function(){return g.AlbumContextMenu},y2:function(){return r.y},ug:function(){return A},wk:function(){return y},ZA:function(){return x.SearchAlbumCard},vK:function(){return V.UpcomingAlbumCard},W9:function(){return C},ym:function(){return l},re:function(){return u},cO:function(){return d},wJ:function(){return m},wq:function(){return p}});var r=t(15808),n=t(2685),a=t(48896),s=t(9096);let l=e=>{let i=e.artists.map(e=>(0,s.d)(e));return(0,n.pj)({...(0,a.N)(e),artists:i})};var o=t(49724);let u=(e,i)=>(0,n.pj)({...l(e),chart:i&&(0,o.W5)(i)});var c=t(56198);let d=e=>{var i,t;let{album:r,artists:a,bookmateOptionRequired:l,chart:o,likesCount:u,trailer:d}=e,{available:m,disclaimers:v}=(0,c.NuW)(r);return(0,n.pj)({id:r.id,title:r.title,coverUri:null===(i=r.cover)||void 0===i?void 0:i.uri,type:r.albumType,contentWarning:r.contentWarning,disclaimers:v,artists:null==a?void 0:a.map(e=>(0,s.tR)({artist:e})),averageColor:null===(t=r.cover)||void 0===t?void 0:t.color,isAvailable:m,likesCount:u,bookmateOptionRequired:l,chart:o,trailer:(0,c.GFX)(d),listeningFinished:r.listeningFinished})},m=e=>{let{album:i,artists:t,likesCount:r,chart:a}=e;return(0,n.pj)({...d({album:i,artists:t,likesCount:r}),chart:a&&(0,o.W5)(a)})};var v=t(99678),b=t(91207);(0,b.cache)(async e=>{try{let{container:i,backendHostTld:t,locale:r,host:n,fullUrl:a,requestUrl:s}=await (0,c.rbP)(),l=i.get(c.qV$),o=await l.getAlbumWithTracksIds({albumId:Number(e),resumeStream:!1});return"not-found"===o.error&&(0,v.notFound)(),{album:o,backendHostTld:t,locale:r,host:n,fullUrl:a,requestUrl:s}}catch(e){return{album:void 0,backendHostTld:"",locale:null,host:"",fullUrl:null,requestUrl:null}}});let p=e=>{var i;let t=null===(i=e.artists)||void 0===i?void 0:i.map(e=>(0,s.tR)({artist:e}));return(0,n.pj)({...(0,a.hh)(e),artists:t})},A=a.KX.props({artists:n.V5.maybe(n.V5.array(s.Go)),chart:n.V5.maybe(o.BH)}).views(e=>({get artistNames(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.name).join(", ")},get artistIds(){var t;return null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.id)}})),C=a.gI.props({artists:n.V5.maybe(n.V5.array(s.Go))}).views(e=>({get artistNames(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.name).join(", ")}}));var h=t(75318),g=t(68768),_=t(65301),k=t(29778);let f=e=>{let{forwardRef:i,isShimmerVisible:t,isShimmerActive:r,title:n,description:a,albums:s,className:l,containerClassName:o,headerClassName:u,viewAllActionLink:c,headingRef:d,headingVariant:m,...v}=e;return(0,_.jsx)(k.HY,{isShimmerVisible:t,isShimmerActive:r,className:l,headerClassName:u,containerClassName:o,ref:i,title:n,description:a,viewAllActionLink:c,headingRef:d,headingVariant:m,...v,children:null==s?void 0:s.map(e=>(0,_.jsx)(h.AlbumCard,{album:e,contentLinesCount:3},e.id))})},y=(0,b.forwardRef)((e,i)=>(0,_.jsx)(f,{forwardRef:i,...e}));var x=t(87582),V=t(51986)},15808:function(e,i,t){"use strict";var r,n;t.d(i,{y:function(){return r}}),(n=r||(r={})).PAGE="PAGE",n.CARD="CARD"},75318:function(e,i,t){"use strict";t.r(i),t.d(i,{AlbumCard:function(){return N}});var r=t(65301),n=t(9695),a=t(96233),s=t(91207),l=t(37184),o=t(3283),u=t(55975),c=t(19489),d=t(52416),m=t(28257),v=t(82036),b=t(43998),p=t(81437),A=t(48896),C=t(9096),h=t(49724),g=t(56198),_=t(29778),k=t(15808);let f={mainAxis:-26,alignmentAxis:-16},y={isEnabled:!0,width:20,height:8,tipRadius:2,fill:"var(--ym-background-color-primary-enabled-tooltip)"};var x=t(68768),V=t(29664),P=t.n(V);let N=(0,a.Pi)(e=>{let{className:i,children:t,album:a,contentLinesCount:V,withLikesCount:N,withChart:j,withAddition:O=!0,withArtistName:L=!0}=e,{ref:B,intersectionPropertyId:U}=(0,g.VfV)(),{trailer:R,advert:I,settings:{isMobile:M},experiments:w}=(0,g.oR4)(),{from:E,utmLink:T}=(0,g.MhG)({contextId:a.id,contextType:c.A.Album,utmForPageIds:a.artistIds}),{notify:D}=(0,g.d$W)(),{formatMessage:S}=(0,l.Z)(),{sendLikeSearchFeedback:W,sendNavigateSearchFeedback:F,sendPlaySearchFeedback:z}=(0,g.sAF)(),[K,G]=(0,s.useState)(!1),[$,Z]=(0,s.useState)(!1),[q,H]=(0,s.useState)(!1),Q=(0,g.zxW)(),X=(0,A.SB)(a),Y=(0,A.BV)(a),J=(0,g.s0h)(a.url),ee=(0,g.s0h)(a.url,!0),[ei,et]=(0,s.useState)(!1),er=(0,g.FTC)(),[en,ea]=(0,s.useState)(!1),es=a.isAvailableOnlyForPlus&&!a.isUnsafeLegal&&!a.isLegalRejected,el=w.checkExperiment(g.peG.WebNextBookmatePlusPaywall,"on"),eo=es&&!M&&el,eu=w.checkExperiment(g.peG.WebNextShowAudiobookCoverForFreemium,"on"),ec=a.isAvailable||eo||eu&&a.isAudiobook,ed=(0,s.useCallback)(e=>{if(e.stopPropagation(),I.isAdvertShown){e.preventDefault(),D((0,r.jsx)(_.vd,{}),{containerId:g.W$x.INFO});return}R.openAlbumTrailer(a.id),er(o.OB.Album,String(a.id))},[a.id,er,R,I.isAdvertShown,D]),em=a.type===d.V.SINGLE?S({id:"entity-names.single"}):void 0,ev=(0,g.tNA)([a.year,em]),eb=(0,A.H0)(a.type),ep=(0,s.useMemo)(()=>{var e;let i=a.isLiked?S({id:"entity-names.has-your-like"}):"";return"".concat(eb," ").concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""," ").concat(i)},[eb,S,a.title,a.isLiked,a.version]),{isPlaying:eA,togglePlay:eC}=(0,g.qmq)({playContextParams:{contextData:{type:c.A.Album,meta:{id:a.id},from:E,utmLink:T},loadContextMeta:!0}}),eh=(0,A.jV)({album:a,callback:J}),eg=(0,A.jV)({album:a,callback:ee}),e_=(0,A.jV)({album:a,callback:eC}),ek=(0,C.ik)(eg,eh),ef=(0,s.useCallback)(e=>{Q({to:o.qU.AlbumScreen}),null==F||F(),ek(e)},[Q,F,ek]),ey=(0,s.useCallback)(e=>{ef(e)},[ef]),ex=(0,s.useCallback)(()=>{$||eA||(Z(!0),null==z||z()),e_()},[eA,$,z,e_]),eV=(0,s.useCallback)(()=>{K||a.isLiked||(G(!0),null==W||W()),X()},[a.isLiked,X,K,W]),eP=(0,s.useCallback)(()=>{H(!q),et(!q)},[q]),eN=(0,s.useMemo)(()=>{var e;return(0,r.jsxs)(p.Caption,{className:(0,n.W)(P().title,{[P().title_withVersion]:a.version,[P().title_withChart]:j}),variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.album.ALBUM_TITLE),children:[(0,r.jsx)(_.rU,{"aria-label":"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""),className:P().titleLink,href:a.url,onClick:ef,...(0,u.BA)(u.bG.album.ALBUM_TITLE_LINK),children:a.title}),a.version&&(0,r.jsx)(p.Caption,{className:P().version,variant:"span",...(0,u.BA)(u.bG.album.ALBUM_VERSION),children:" ".concat(a.version)})]})},[a.title,a.url,a.version,ef,j]),ej=(0,s.useMemo)(()=>{var e;return(0,r.jsx)(_.rU,{href:a.url,onClick:ef,children:"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:"")})},[a.title,a.url,a.version,ef]),eO=(0,s.useMemo)(()=>{var e;if(null==a?void 0:null===(e=a.trailer)||void 0===e?void 0:e.isAvailable)return(0,r.jsx)(_.xf,{children:(0,r.jsx)(_.eP,{className:(0,n.W)(P().trailerButton,P().control),radius:"round",size:"s",iconSize:"xxs",onClick:ed},a.getKey("TrailerButton"))},a.getKey("AlbumCardTrailerTooltip"))},[a,ed]),eL=(0,s.useMemo)(()=>(0,r.jsx)(x.AlbumContextMenu,{album:a,onOpenChange:eP,open:q,className:(0,n.W)(P().menuButton,P().control),icon:(0,r.jsx)(v.Icon,{size:"xxs",variant:"more"}),size:"s",variant:k.y.CARD,...(0,u.BA)(u.bG.album.ALBUM_CONTEXT_MENU_BUTTON)},a.getKey("AlbumContextMenu")),[a,eP,q]),eB=(0,s.useCallback)(()=>(0,r.jsx)(_.JM,{className:(0,n.W)(P().playButton,P().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:ex,isPlaying:eA,disabled:eo},a.getKey("PlayButton")),[eo,a,eA,ex]),eU=(0,s.useMemo)(()=>eo?(0,r.jsx)(_.pl,{className:P().buyPlusPopover,buttonText:S({id:"interface-actions.more-details"}),isNested:!0,placement:"top-start",isOpened:en,onOpenChange:ea,textVariant:"bookmate",arrowProps:y,offsetOptions:f,renderChildren:eB}):eB(),[eo,en,ea,S,eB]),eR=(0,s.useMemo)(()=>{if(!eo)return(0,r.jsx)(_.dJ,{className:(0,n.W)(P().likeButton,P().control),isLiked:a.isLiked,onClick:eV,variant:"default",size:"s",iconSize:"xxs"},a.getKey("LikeButton"))},[a,eo,eV]),eI=(0,s.useMemo)(()=>{if(!eo)return(0,r.jsx)(_.RT,{onClick:Y,isPinned:a.isPinned,className:(0,n.W)(P().pinButton,P().control),withRipple:!1,isDisabled:eo},a.getKey("PinButton"))},[a,eo,Y]),eM=(0,s.useMemo)(()=>{if(a.isAvailable||eo)return(0,r.jsx)(m.kk,{isVisible:q||ei||en,className:P().controls,playControl:eU,likeControl:eR,menuControl:eL,pinControl:eI,trailerControl:eO})},[a,q,ei,eL,eO,en,eU,eR,eI,eo]),ew=(0,s.useMemo)(()=>(0,r.jsx)(b.Paper,{className:P().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.album.ALBUM_CARD),children:(0,r.jsxs)("div",{className:P().coverBlock,onClick:ey,children:[(0,r.jsx)(_.BE,{className:P().image,src:a.coverUri,size:200,fit:"cover",alt:ep,withAvatarReplace:!0,isAvailable:ec,"aria-hidden":!0}),es&&(0,r.jsx)(v.Icon,{variant:"plusBadge",className:P().plusBadge}),eM]})}),[ey,a.coverUri,ec,ep,eM,es]);return(0,r.jsxs)(m.m7,{ref:B,className:(0,n.W)(P().root,{[P().root_withChart]:j},i),"aria-label":ep,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(_.$i,{className:P().explicitMark,getDescriptionTexts:a.getDescriptionTexts,variant:a.albumExplicitMark},a.getKey("AlbumCardExplicitMarkIcon")),title:eN,srTitle:ej,"data-intersection-property-id":U,contentLinesCount:V,view:ew,description:L&&(0,r.jsx)(C.jO,{className:P().artists,artists:a.artists,lineClamp:1,linkClassName:P().artistLink,captionSize:"s"},a.getKey("description")),chart:j&&a.chart&&(0,r.jsx)(h.kL,{withIcon:!0,className:P().chart,position:a.chart.position,progress:a.chart.progress},a.getKey("chart")),...(0,u.BA)(u.bG.album.ALBUM_ITEM),children:[O&&ev&&(0,r.jsx)(p.Caption,{className:P().addition,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:ev}),N&&!!a.actualLikesCount&&(0,r.jsx)(_.DB,{className:P().likeTextButton,ariaLabel:S({id:"entity-names.likes-counter"},{counter:a.actualLikesCount}),likesCount:a.actualLikesCount,isLiked:a.isLiked,handleLikeClick:X}),t]})})},68768:function(e,i,t){"use strict";t.d(i,{AlbumContextMenu:function(){return p}});var r=t(65301),n=t(96233),a=t(91207),s=t(37184),l=t(3283),o=t(55975),u=t(19489),c=t(92154),d=t(48896),m=t(56198),v=t(29778),b=t(15808);let p=(0,n.Pi)(e=>{var i,t;let{album:n,onOpenChange:p,open:A,wrapperClassName:C,variant:h,...g}=e,{shouldShowBuySubscriptionModal:_,showBuySubscriptionModal:k}=(0,m.vLf)(),{settings:{isMobile:f},trailer:y,advert:x,user:V}=(0,m.oR4)(),P=(0,d.SB)(n),N=(0,d.BV)(n),{notify:j}=(0,m.d$W)(),O=(0,m.FTC)(),L="".concat(m.aUg.ALBUM,"-").concat(n.id),B=(0,m.RVp)()&&n.isNonMusic,U=B&&h===b.y.PAGE,{formatMessage:R}=(0,s.Z)(),I=(0,d.ap)(),{href:M}=(0,m.qKB)(n.url),{isPlaying:w,togglePlay:E}=(0,m.QhE)({seeds:null!==(t=null==n?void 0:n.seeds)&&void 0!==t?t:[],pageIdForFrom:m.Rhz.RADIO,blockIdForFrom:L}),{utmLink:T}=(0,m.MhG)({blockId:m.aUg.ALBUM,contextType:u.A.Album,contextId:null==n?void 0:n.id}),D=(0,a.useCallback)(()=>{if(_&&V.isAuthorized){k();return}if(x.isAdvertShown){j((0,r.jsx)(v.vd,{}),{containerId:m.W$x.INFO});return}w||E()},[_,V.isAuthorized,x.isAdvertShown,w,k,j,E]),S=(0,a.useCallback)(()=>{if(_){k();return}if(x.isAdvertShown){j((0,r.jsx)(v.vd,{}),{containerId:m.W$x.INFO});return}y.setUtmLink(T),y.openAlbumTrailer(n.id),O(l.OB.Album,String(n.id))},[_,x.isAdvertShown,y,T,n.id,O,k,j]);(0,m.ZP4)(A);let W=(0,a.useMemo)(()=>{if(!f)return(0,r.jsx)(v.Zd,{onClick:N,isPinned:n.isPinned,disabled:!n.isAvailable})},[n.isAvailable,n.isPinned,N,f]),F=(0,a.useMemo)(()=>B?(0,r.jsx)(v.qq,{onClick:P,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable,albumType:n.type}):(0,r.jsx)(v.xZ,{onClick:P,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable}),[n.isAvailable,null==n?void 0:n.isLiked,n.type,P,B]),z=(0,a.useMemo)(()=>{var e;if(!B&&(null===(e=n.trailer)||void 0===e?void 0:e.isAvailable))return(0,r.jsx)(v.NB,{onClick:S,disabled:!n.isAvailable})},[n.isAvailable,null===(i=n.trailer)||void 0===i?void 0:i.isAvailable,S,B]),K=(0,a.useMemo)(()=>{if(!B)return(0,r.jsx)(v.GQ,{onClick:D,disabled:!n.isAvailable,variant:m.xIL.ALBUM,onOpenMenuChange:p})},[n.isAvailable,D,B,p]);return(0,r.jsxs)(c.v2,{isMobile:f,offsetOptions:10,open:A,onOpenChange:p,ariaLabel:R({id:"interface-actions.context-menu"}),wrapperClassName:C,containerProps:(0,o.BA)(o.bG.album.ALBUM_CONTEXT_MENU),...g,children:[f&&(0,r.jsx)(v.TF,{getDescriptionTexts:n.getDescriptionTexts,entityId:n.id}),W,F,z,K,U&&(0,r.jsx)(v.RY,{onClick:I,isFinished:n.listeningFinished}),(0,r.jsx)(v.zq,{shareLink:M,entityVariant:"album",entityTitle:n.title})]})})},87582:function(e,i,t){"use strict";t.d(i,{SearchAlbumCard:function(){return A}});var r=t(65301),n=t(9695),a=t(96233),s=t(91207),l=t(55975),o=t(19489),u=t(60383),c=t(82036),d=t(81437),m=t(48896),v=t(9096),b=t(56198),p=t(29778);let A=(0,a.Pi)(e=>{var i;let{className:t,album:a,pageId:A}=e,{ref:C,intersectionPropertyId:h}=(0,b.VfV)(),{from:g}=(0,b.MhG)({pageId:A}),_=(0,b.s0h)(a.url),{isPlaying:k,isCurrent:f,togglePlay:y}=(0,b.qmq)({playContextParams:{contextData:{type:o.A.Album,meta:{id:a.id},from:g},loadContextMeta:!0}}),x=(0,m.jV)({album:a,callback:_}),V=(0,m.jV)({album:a,callback:y}),P=(0,s.useCallback)(e=>{(0,u.m)(e,p.$C.ripple),x(e)},[x]),N=(0,s.useCallback)(e=>{x(e)},[x]),j=(0,s.useCallback)(e=>(0,r.jsx)(p.Df,{isAvailable:a.isAvailable,isDisliked:!1,coverUri:a.coverUri,title:a.title,className:p.$C.playButtonCell,...e}),[a]),O=null==j?void 0:j({onPlayButtonClick:V,isPlaying:k,isCurrent:f}),L=(0,s.useMemo)(()=>a.url&&a.isAvailable?(0,r.jsx)(p.rU,{className:(0,n.W)(p.$C.text,p.$C.titleLink),href:a.url,onClick:N,children:a.title}):(0,r.jsx)(d.Caption,{className:(0,n.W)(p.$C.text,p.$C.titleText),size:"m",variant:"div",type:"text",children:a.title}),[a.isAvailable,a.title,a.url,N]),B=(0,s.useCallback)((e,i)=>{var t;return(null===(t=a.artists)||void 0===t?void 0:t.length)?(0,r.jsx)(v.jO,{linkClassName:e,captionClassName:i,artists:a.artists,lineClamp:1,withLink:a.isAvailable}):null},[a.artists,a.isAvailable]);return(0,r.jsxs)(p.Md,{ref:C,"data-intersection-property-id":h,className:(0,n.W)(p.$C.root,{[p.$C.root_disabled]:!a.isAvailable},t),"aria-label":"".concat(a.artistNames," ").concat(a.title," ").concat(null!==(i=a.version)&&void 0!==i?i:""),onClick:P,...(0,l.BA)(l.bG.album.SEARCH_ALBUM_CARD),children:[O,(0,r.jsx)(p.u,{isDisabled:!a.isAvailable,version:a.version,title:L,artistsComponent:B,getDescriptionTexts:a.getDescriptionTexts,explicitMarkVariant:a.albumExplicitMark}),(0,r.jsx)("div",{className:p.$C.controlsBarCell,children:(0,r.jsx)(c.Icon,{className:p.$C.buttonArrow,variant:"arrowRight",size:"xs"})})]})})},51986:function(e,i,t){"use strict";t.d(i,{UpcomingAlbumCard:function(){return _}});var r=t(65301),n=t(9695),a=t(96233),s=t(91207),l=t(37184),o=t(44729),u=t(78372),c=t(28257),d=t(82036),m=t(43998),v=t(81437),b=t(48896),p=t(9096),A=t(56198),C=t(29778),h=t(25629),g=t.n(h);let _=(0,a.Pi)(e=>{let{className:i,children:t,upcomingAlbum:a,contentLinesCount:h}=e,{ref:_,intersectionPropertyId:k}=(0,A.VfV)(),{formatMessage:f,formatDate:y}=(0,l.Z)(),x=(0,b.IK)(a),V=a.getKey("PlayButton"),P=a.getKey("LikeButton"),N=(0,s.useMemo)(()=>{let e=f({id:"entity-names.upcoming-album-name"},{upcomingAlbumName:a.title}),i=a.isPresave?f({id:"entity-names.has-your-like"}):"";return"".concat(e," ").concat(i)},[f,a.title,a.isPresave]),j=(0,s.useMemo)(()=>(0,r.jsxs)(m.Paper,{className:g().cover,radius:"s",withShadow:!0,children:[(0,r.jsx)(C.BE,{className:g().image,src:a.coverUri,size:200,fit:"cover",alt:N,withAvatarReplace:!0}),(0,r.jsx)(c.kk,{className:g().controls,playControl:(0,r.jsx)(u.z,{className:g().lockButton,disabled:!0,radius:"xxxl",variant:"default",size:"s",icon:(0,r.jsx)(d.Icon,{variant:"lock",size:"xxs",className:g().lockIcon}),"aria-label":f({id:"entity-names.upcoming-album-play-disabled"})},V),likeControl:(0,r.jsx)(C.dJ,{className:(0,n.W)(g().control,g().presaveButton),isLiked:a.isPresave,onClick:x,variant:"default",size:"s",iconSize:"xxs"},P)})]}),[f,x,a.coverUri,a.isPresave,N,V,P]);return(0,r.jsxs)(c.m7,{ref:_,className:(0,n.W)(g().root,i),"aria-label":N,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(C.$i,{getDescriptionTexts:a.getDescriptionTexts,variant:a.albumExplicitMark}),title:(0,r.jsx)(v.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:a.title}),"data-intersection-property-id":k,contentLinesCount:h,view:j,description:(0,r.jsx)(p.jO,{className:g().artists,artists:a.artists,lineClamp:1,linkClassName:g().artistLink,captionSize:"s"}),children:[(0,r.jsx)(v.Caption,{className:g().releaseDate,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:(0,r.jsx)(o.Z,{id:"entity-names.upcoming-album-date",values:{releaseDate:y(a.releaseDate,(0,A.YTW)())}})}),t]})})},82605:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"Chart_root__ODed_",position:"Chart_position__7UNY9",position_disliked:"Chart_position_disliked__HzjC7",position_disabled:"Chart_position_disabled__poZzD",progress:"Chart_progress__sGj4s",progress_up:"Chart_progress_up__y083c",progress_same:"Chart_progress_same__Cnbdb",progress_down:"Chart_progress_down__lv_ae",progress_new:"Chart_progress_new__7DobI",progress_disliked:"Chart_progress_disliked__maVAk",progress_disabled:"Chart_progress_disabled__JoFqG"}},29664:function(e){e.exports={root:"AlbumCard_root__vP6k4",root_withChart:"AlbumCard_root_withChart__J2SZv",artists:"AlbumCard_artists__phKco",likeTextButton:"AlbumCard_likeTextButton__2AQd9",controls:"AlbumCard_controls__yuO40",cover:"AlbumCard_cover__zXmdl",coverBlock:"AlbumCard_coverBlock__94ZzY",image:"AlbumCard_image__Mm55s",titleLink:"AlbumCard_titleLink__u_WLG",title:"AlbumCard_title__8YvhT",title_withVersion:"AlbumCard_title_withVersion__NClAp",title_withChart:"AlbumCard_title_withChart__PVOiJ",chart:"AlbumCard_chart__gASdj",version:"AlbumCard_version__h2aJz",artistLink:"AlbumCard_artistLink__uPR_2",playButton:"AlbumCard_playButton__mYK9R",likeButton:"AlbumCard_likeButton__9B9C0",menuButton:"AlbumCard_menuButton__pxkA6",pinButton:"AlbumCard_pinButton__Mdi_E",trailerButton:"AlbumCard_trailerButton__typHh",control:"AlbumCard_control__qx7Xh",plusBadge:"AlbumCard_plusBadge__i0FkP",buyPlusPopover:"AlbumCard_buyPlusPopover__Kb79C"}},25629:function(e){e.exports={root:"UpcomingAlbumCard_root__lSZ5l",controls:"UpcomingAlbumCard_controls__fQ50f",cover:"UpcomingAlbumCard_cover__qvU1m",image:"UpcomingAlbumCard_image__WKtGR",releaseDate:"UpcomingAlbumCard_releaseDate__EvDzB",artists:"UpcomingAlbumCard_artists__Jp1OE",artistLink:"UpcomingAlbumCard_artistLink__RSqXw",control:"UpcomingAlbumCard_control__pSMdI",presaveButton:"UpcomingAlbumCard_presaveButton__ixwy_",lockButton:"UpcomingAlbumCard_lockButton__9_qyp",lockIcon:"UpcomingAlbumCard_lockIcon__wtvkP"}},81891:function(e,i,t){"use strict";var r,n;t.d(i,{Z:function(){return r}}),(n=r||(r={})).OK="ok",n.ERROR="error"},43068:function(e,i,t){"use strict";var r,n;t.d(i,{h:function(){return r}}),(n=r||(r={})).UP="up",n.DOWN="down",n.SAME="same",n.NEW="new"}}]);