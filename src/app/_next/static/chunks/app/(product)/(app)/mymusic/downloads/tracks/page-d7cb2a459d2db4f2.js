(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7507],{76860:function(e,t,n){Promise.resolve().then(n.bind(n,6804))},49069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=n(86790);n(65301),n(91207);let i=r._(n(97822));function a(e,t){var n;let r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,i.default)({...a,modules:null==(n=a.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},97822:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let r=n(65301),i=n(91207),a=n(25613),s=n(43659);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},u=function(e){let t={...l,...e},n=(0,i.lazy)(()=>t.loader().then(o)),u=t.loading;function c(e){let o=u?(0,r.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(s.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(i.Suspense,{fallback:o,children:l})}return c.displayName="LoadableComponent",c}},26928:function(e,t,n){"use strict";n.d(t,{Ji:function(){return f}});var r,i,a,s,o=n(72669),l=n(91207),u=n(37184);(r=a||(a={})).formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName",(i=s||(s={})).formatDate="FormattedDateParts",i.formatTime="FormattedTimeParts",i.formatNumber="FormattedNumberParts",i.formatList="FormattedListParts";var c=function(e){var t=(0,u.Z)(),n=e.value,r=e.children,i=(0,o.__rest)(e,["value","children"]);return r(t.formatNumberToParts(n,i))};function d(e){var t=function(t){var n=(0,u.Z)(),r=t.value,i=t.children,a=(0,o.__rest)(t,["value","children"]),s="string"==typeof r?new Date(r||0):r;return i("formatDate"===e?n.formatDateToParts(s,a):n.formatTimeToParts(s,a))};return t.displayName=s[e],t}function m(e){var t=function(t){var n=(0,u.Z)(),r=t.value,i=t.children,a=(0,o.__rest)(t,["value","children"]),s=n[e](r,a);if("function"==typeof i)return i(s);var c=n.textComponent||l.Fragment;return l.createElement(c,null,s)};return t.displayName=a[e],t}c.displayName="FormattedNumberParts",c.displayName="FormattedNumberParts";var f=m("formatDate");m("formatTime"),m("formatNumber"),m("formatList"),m("formatDisplayName"),d("formatDate"),d("formatTime")},62185:function(e,t,n){"use strict";n.d(t,{v:function(){return c}});var r,i=n(80766),a=n(91207),s={6699:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useDebouncedToggle=void 0;let r=n(352),i=n(810);t.useDebouncedToggle=e=>{let{delay:t,initialState:n,throttleTimeout:a}=e,s=(0,i.useRef)(null),[o,l]=(0,i.useState)(!!n),u=(0,i.useMemo)(()=>(0,r.throttle)(()=>{l(!n),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{l(!!n)},t)},a),[t,n,a]),c=(0,i.useCallback)(()=>{l(!!n),s.current&&window.clearTimeout(s.current)},[n]);return(0,i.useEffect)(()=>()=>{s.current&&window.clearTimeout(s.current)},[]),{state:o,handleDebouncedToggle:u,reset:c}}},361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getElementFromRefOrElement=void 0,t.getElementFromRefOrElement=e=>void 0===e?void 0:null===e||e instanceof HTMLElement?e:null===e.current||e.current instanceof HTMLElement?e.current:void 0},352:e=>{e.exports=i},810:e=>{e.exports=r||(r=n.t(a,2))}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return s[e](n,n.exports,l),n.exports}var u={};(()=>{Object.defineProperty(u,"__esModule",{value:!0}),u.useScroll=void 0;let e=l(810),t=l(361),n=l(6699);u.useScroll=r=>{let{onScroll:i,listenIsScrolling:a,elementRef:s}=r,{state:o,handleDebouncedToggle:l}=(0,n.useDebouncedToggle)({delay:1e3,throttleTimeout:100}),u=(0,e.useCallback)(()=>{a&&l(),null==i||i()},[a,l,i]);return(0,e.useEffect)(()=>{let e=(0,t.getElementFromRefOrElement)(s);if(null===e)return;let n=null!=e?e:window,r={capture:!0,passive:!0};return n.addEventListener("scroll",u,r),()=>n.removeEventListener("scroll",u,r)},[s,u]),o}})(),u.__esModule;var c=u.useScroll},6804:function(e,t,n){"use strict";n.r(t);var r=n(65301),i=n(60863),a=n(26095);n(32544),t.default=()=>(0,r.jsx)(i.m6,{withRedirectToMainPage:!0,children:(0,r.jsx)(a.p,{})})},60863:function(e,t,n){"use strict";n.d(t,{m6:function(){return r.WithAuth}});var r=n(56101);n(11589),n(50470),n(93414),n(58710),n(65301);var i=n(49069);n.n(i)().default(async()=>Promise.all([n.e(438),n.e(6098)]).then(n.bind(n,6098)),{ssr:!1})},48896:function(e,t,n){"use strict";n.d(t,{wV:function(){return f.AlbumEntityNameConsumer},KX:function(){return A},gI:function(){return D},lf:function(){return a},N:function(){return u},hh:function(){return c},Vt:function(){return d.useAlbumAnalyticsAppScreenName},jV:function(){return m.useAlbumDisclaimer},H0:function(){return f.useAlbumEntityName},ap:function(){return v.useMarkAlbumListenedClick},SB:function(){return g.useOnLikeClick},BV:function(){return p.useOnPinClick},IK:function(){return h.useOnPresaveClick}});var r,i,a,s,o=n(2685),l=n(56198);let u=e=>{let t=(0,l.GFX)(e.trailer);return(0,o.pj)({id:e.id,title:e.title,coverUri:e.coverUri,type:e.type,year:e.year,version:e.version,contentWarning:e.contentWarning,genre:e.genre,likesCount:e.likesCount,averageColor:(0,l.Usz)(e.derivedColors),isAvailable:!!e.available,trackPosition:e.trackPosition,disclaimers:e.disclaimers,trackCount:e.trackCount,availableForPremiumUsers:e.availableForPremiumUsers,availableForOptions:e.availableForOptions||[],bestAlbumTracks:e.bests,durationSec:e.durationSec,trailer:t,listeningFinished:!!e.listeningFinished})},c=e=>{let t=!1;return e.presaveDate?t=!0:e.presaved&&(t=e.presaved),(0,o.pj)({id:e.id,contentWarning:e.contentWarning,disclaimers:e.disclaimers,isPresave:t,title:e.title,type:e.type,coverUri:e.coverUri,releaseDate:e.releaseDate})};(r=a||(a={})).TRACK="track",r.TEXT="text";var d=n(56307),m=n(17983),f=n(13508),v=n(27066),g=n(54323),p=n(65826),h=n(57134),_=n(52416);(i=s||(s={})).KIDS="kids",i.BOOKMATE="bookmate";var y=n(27980),b=n(19522),k=n(83768),x=n(91694);let P=o.V5.model("TrackPosition",{volume:o.V5.number,index:o.V5.number}),A=o.V5.compose(o.V5.model({id:o.V5.number,title:o.V5.string,type:o.V5.maybe(o.V5.enumeration(Object.values(_.V))),coverUri:o.V5.maybe(o.V5.string),averageColor:o.V5.maybe(o.V5.string),year:o.V5.maybe(o.V5.number),version:o.V5.maybe(o.V5.string),isAvailable:o.V5.optional(o.V5.boolean,!0),availableForOptions:o.V5.maybe(o.V5.array(o.V5.enumeration(Object.values(s)))),availableForPremiumUsers:o.V5.maybe(o.V5.boolean),bookmateOptionRequired:o.V5.maybe(o.V5.boolean),genre:o.V5.maybe(o.V5.string),trackPosition:o.V5.maybe(P),disclaimers:o.V5.maybe(o.V5.array(o.V5.string)),trackCount:o.V5.maybe(o.V5.number),bestAlbumTracks:o.V5.maybe(o.V5.array(o.V5.number)),trailer:o.V5.maybe(x.K8),durationSec:o.V5.maybe(o.V5.number),listeningFinished:o.V5.maybe(o.V5.boolean)}),x.fE,x.ie).views(e=>({get url(){return"/album/".concat(e.id)},get isLiked(){if(!(0,o.fh)(e))return!1;let{library:t}=(0,o.yj)(e);return null==t?void 0:t.isAlbumLiked(e.id)},get pinId(){return"".concat(y.Q.ALBUM_ITEM).concat(e.id)},get seeds(){return["album:".concat(e.id)]},get isAlbum(){return e.type===_.V.ALBUM||e.type===_.V.SINGLE},get isPodcast(){return e.type===_.V.PODCAST},get isAudiobook(){return e.type===_.V.AUDIOBOOK},get isFairyTale(){return e.type===_.V.FAIRY_TALE},get isNonMusic(){return this.isAudiobook||this.isPodcast||this.isFairyTale},get isPinned(){if(!(0,o.fh)(e))return!1;let{pinsCollection:t}=(0,o.yj)(e);return t.isPinned(this.pinId)},get newModalDisclaimerId(){if(e.disclaimers){var t;let n=null===(t=(0,l.V4d)(e.disclaimers,b.e.MODAL))||void 0===t?void 0:t[0];if(n){let{id:e}=n;return e}}return null},get isForeignAgent(){var n,r;if(!(0,o.fh)(e))return!1;let{experiments:t}=(0,o.yj)(e),i=t.checkExperiment(l.peG.WebNextNewExplicitApiModalFA,"on"),a=!!(null===(n=e.disclaimers)||void 0===n?void 0:n.includes(b.e.FOREIGN_AGENT));if(i&&e.disclaimers){let t=null===(r=(0,l.V4d)(e.disclaimers,b.e.FOREIGN_AGENT))||void 0===r?void 0:r[0];a=(null==t?void 0:t.type)===b.e.FOREIGN_AGENT}return a&&t.checkExperiment(l.peG.WebNextAgentPodcast,"on")},get isLegalRejected(){if(!(0,o.fh)(e))return!1;let{experiments:t}=(0,o.yj)(e),n=t.checkExperiment(l.peG.WebNextNewExplicitApiModalFA,"on");if(e.disclaimers){var i;let t=null===(i=(0,l.V4d)(e.disclaimers,b.e.MODAL))||void 0===i?void 0:i[0],r=n&&(null==t?void 0:t.type)===b.e.MODAL;return!e.isAvailable&&(r||e.disclaimers.includes(b.e.MODAL))}return!1},get isUnsafeLegal(){if(!(0,o.fh)(e))return!1;let{experiments:t}=(0,o.yj)(e),n=t.checkExperiment(l.peG.WebNextLegalUnsafeAlbum,"on"),r=t.checkExperiment(l.peG.WebNextNewExplicitApiModalFA,"on");if(e.disclaimers&&r){var a;let t=null===(a=(0,l.V4d)(e.disclaimers,b.e.MODAL))||void 0===a?void 0:a[0];return e.isAvailable&&(null==t?void 0:t.type)===b.e.MODAL}if(e.disclaimers&&n)return e.isAvailable&&e.disclaimers.includes(b.e.MODAL);return!1},get isAvailableOnlyForPlus(){var u;return!e.isAvailable&&(e.availableForPremiumUsers||!!(null===(u=e.availableForOptions)||void 0===u?void 0:u.includes(s.BOOKMATE)))},get shouldShowBooksBadge(){var c;return!!(e.bookmateOptionRequired||!e.availableForPremiumUsers&&(null===(c=e.availableForOptions)||void 0===c?void 0:c.includes(s.BOOKMATE)))}})).actions(e=>({toggleLike:(0,o.ls)(function*(){if(!(0,o.fh)(e))return;let{library:t,user:n}=(0,o.yj)(e);if(n.isAuthorized){let r=yield t.toggleAlbumLike({entityId:e.id,userId:n.account.uid});return(0,o.fh)(e)&&r===k.B.OK&&(e.isLiked?e.likePending():e.unlikePending()),r}}),togglePin:(0,o.ls)(function*(){if(!(0,o.fh)(e))return;let{pinsCollection:t,user:n}=(0,o.yj)(e);if(n.isAuthorized)return yield t.toggleAlbumPin({id:e.id},e.pinId)}),getKey:t=>"".concat(t,"_").concat(e.id),updateFinished:t=>{e.listeningFinished=t}})).named("BaseAlbum");var C=n(81891);let D=o.V5.compose(o.V5.model("BaseUpcomingAlbum",{id:o.V5.number,isPresave:o.V5.boolean,title:o.V5.maybe(o.V5.string),type:o.V5.maybe(o.V5.enumeration(Object.values(_.V))),coverUri:o.V5.maybe(o.V5.string),releaseDate:o.V5.maybe(o.V5.string)}),x.ie).actions(e=>{let t={presaveAlbum:(0,o.ls)(function*(t){let{usersResource:n,modelActionsLogger:r}=(0,o.dU)(e);try{e.isPresave=!0;let r=yield n.presaveAlbum(t);return r===C.Z.ERROR&&(e.isPresave=!1),r}catch(t){return e.isPresave=!1,r.error(t),C.Z.ERROR}}),removePresaveAlbum:(0,o.ls)(function*(t){let{usersResource:n,modelActionsLogger:r}=(0,o.dU)(e);try{e.isPresave=!1;let r=yield n.removePresaveAlbum(t);return r===C.Z.ERROR&&(e.isPresave=!0),r}catch(t){return e.isPresave=!0,r.error(t),C.Z.ERROR}}),toggleLike:(0,o.ls)(function*(){let n;if(!(0,o.fh)(e))return;let{user:r}=(0,o.yj)(e);if(r.account.uid)return n=e.isPresave?yield t.removePresaveAlbum({albumId:e.id,userId:r.account.uid}):yield t.presaveAlbum({albumId:e.id,userId:r.account.uid,likeAfterRelease:!0}),(0,o.fh)(e),n}),getKey:t=>"".concat(t,"_").concat(e.id)};return t})},56307:function(e,t,n){"use strict";n.d(t,{useAlbumAnalyticsAppScreenName:function(){return o}});var r=n(91207),i=n(3283),a=n(52416),s=n(56198);let o=e=>{let t=(0,s.RVp)();return(0,r.useMemo)(()=>{if(!t)return i.qU.AlbumScreen;switch(e){case a.V.PODCAST:return i.qU.PodcastScreen;case a.V.AUDIOBOOK:return i.qU.AudiobookScreen;default:return i.qU.AlbumScreen}},[e,t])}},17983:function(e,t,n){"use strict";n.d(t,{useAlbumDisclaimer:function(){return s}});var r=n(91207),i=n(10231),a=n(56198);let s=e=>{let{album:t,callback:n,shouldHistoryBack:s}=e,{disclaimer:o,modals:{disclaimerModal:l}}=(0,a.oR4)(),u=(0,r.useRef)(String((0,i.Z)())),c=(0,r.useRef)(!1),d=(0,a.uK4)().get(a.ceh);return(0,r.useEffect)(()=>{o.isUnsafeDisclaimerConfirmed&&o.id===u.current&&!c.current&&(null==n||n(),c.current=!0)},[n,o.isUnsafeDisclaimerConfirmed,o.id]),(0,r.useCallback)(async e=>{let r=d.get(a.BUb.ExEx),i=(null==t?void 0:t.isPodcast)?null==r?void 0:r.includes("".concat(a.coP.PODCAST,"_").concat(t.id)):null==r?void 0:r.includes("".concat(a.coP.ALBUM,"_").concat(null==t?void 0:t.id));if((null==t?void 0:t.isUnsafeLegal)&&i){null==n||n();return}if((null==t?void 0:t.isLegalRejected)||(null==t?void 0:t.isUnsafeLegal)){null==e||e.preventDefault(),await o.getDisclaimerData({entityId:t.id,entityType:t.isPodcast?a.coP.PODCAST:a.coP.ALBUM,newDisclaimerId:t.newModalDisclaimerId}),t.isUnsafeLegal&&o.setType(a.Gq.UNSAFE),o.setId(u.current),o.setEntityId(t.id),t.isPodcast?o.setEntityType(a.coP.PODCAST):o.setEntityType(a.coP.ALBUM),o.setShouldHistoryBack(!!s),c.current=!1,l.open();return}null==e||e.preventDefault(),null==n||n()},[null==t?void 0:t.id,null==t?void 0:t.isLegalRejected,null==t?void 0:t.isPodcast,null==t?void 0:t.isUnsafeLegal,null==t?void 0:t.newModalDisclaimerId,n,o,l,d,s])}},13508:function(e,t,n){"use strict";n.d(t,{AlbumEntityNameConsumer:function(){return r},useAlbumEntityName:function(){return l}});var r,i=n(91207),a=n(37184),s=n(52416),o=n(56198);(r||(r={})).PIN="pin";let l=(e,t)=>{let{formatMessage:n}=(0,a.Z)(),r=(0,o.RVp)();return(0,i.useMemo)(()=>{if(!r)return e===s.V.SINGLE?n({id:"entity-names.single"}):n({id:"entity-names.album"});switch(e){case s.V.SINGLE:return n({id:"entity-names.single"});case s.V.PODCAST:return n({id:"entity-names.podcast"});case s.V.AUDIOBOOK:if("pin"===t)return n({id:"entity-names.book"});return n({id:"entity-names.audio"});case s.V.FAIRY_TALE:return n({id:"entity-names.fairy-tale"});default:return n({id:"entity-names.album"})}},[e,n,r,t])}},27066:function(e,t,n){"use strict";n.d(t,{useMarkAlbumListenedClick:function(){return o}});var r=n(91207),i=n(37184),a=n(26157),s=n(56198);let o=()=>{let{user:e,album:t}=(0,s.oR4)(),{notify:n}=(0,s.d$W)(),{formatMessage:o}=(0,i.Z)();return(0,r.useCallback)(async()=>{if(t){var r,i;let l;if(!e.isAuthorized){n(o({id:"authorization-messages.need-to-authorizate"}),{containerId:s.W$x.ERROR});return}let u=null===(r=t.meta)||void 0===r?void 0:r.listeningFinished;u?(l=await t.markUnfinished({albumId:Number(t.id)}),t.setAllTracksUnfinished(!0)):l=await t.markFinished({albumId:Number(t.id)}),l!==a.P.OK?n(o({id:"error-messages.error-during-action"}),{containerId:s.W$x.ERROR}):null===(i=t.meta)||void 0===i||i.updateFinished(!u)}},[o,n,t,e.isAuthorized])}},49283:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(52416),i=n(56198),a=n(29778);let s=e=>{if(!(0,i.RVp)())return a.j9.ALBUM;switch(e.type){case r.V.PODCAST:return a.j9.PODCAST;case r.V.AUDIOBOOK:return a.j9.AUDIOBOOK;default:return a.j9.ALBUM}}},54323:function(e,t,n){"use strict";n.d(t,{useOnLikeClick:function(){return p}});var r=n(65301),i=n(79491),a=n(91207),s=n(37184),o=n(83768),l=n(56198),u=n(29778),c=n(96233),d=n(49283),m=n(52416);let f="/collection/albums",v=e=>{if(!(0,l.RVp)())return f;switch(e.type){case m.V.PODCAST:case m.V.AUDIOBOOK:return"/collection/non-music/liked";default:return f}},g=(0,c.Pi)(e=>{let{album:t,closeToast:n}=e,i=v(t),a=(0,d.C)(t);return(0,r.jsx)(u.AP,{closeToast:n,entityVariant:a,coverUri:t.coverUri,entityUrl:"/album/".concat(t.id),collectionUrl:i,entityTitle:t.title,isLiked:t.isLiked})}),p=e=>{let{user:t}=(0,l.oR4)(),{notify:n}=(0,l.d$W)(),[c,d]=(0,a.useState)(!1),{formatMessage:m}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!e)return;if(!t.isAuthorized){n((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:l.W$x.ERROR});return}if(c)return;let a={...(0,i.ZN)(e),isLiked:!e.isLiked};d(!0);let s=await e.toggleLike();d(!1),s===o.B.OK?n((0,r.jsx)(g,{album:a}),{containerId:l.W$x.INFO}):n((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:l.W$x.ERROR})},[t.isAuthorized,c,e,m,n])}},65826:function(e,t,n){"use strict";n.d(t,{useOnPinClick:function(){return m}});var r=n(65301),i=n(79491),a=n(91207),s=n(37184),o=n(56198),l=n(29778),u=n(96233),c=n(49283);let d=(0,u.Pi)(e=>{let{album:t,closeToast:n}=e,i=(0,c.C)(t);return(0,r.jsx)(l.K1,{closeToast:n,entityVariant:i,coverUri:t.coverUri,entityUrl:"/album/".concat(t.id),entityTitle:t.title,isPinned:t.isPinned})}),m=e=>{let{user:t}=(0,o.oR4)(),{notify:n}=(0,o.d$W)(),{formatMessage:u}=(0,s.Z)(),[c,m]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!t.isAuthorized){n((0,r.jsx)(l.Q,{error:u({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,i.ZN)(e),isPinned:!e.isPinned};m(!0);let s=await e.togglePin();m(!1),s?n((0,r.jsx)(d,{album:a}),{containerId:o.W$x.INFO}):n((0,r.jsx)(l.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[e,u,n,c,t.isAuthorized])}},57134:function(e,t,n){"use strict";n.d(t,{useOnPresaveClick:function(){return d}});var r=n(65301),i=n(79491),a=n(91207),s=n(37184),o=n(81891),l=n(56198),u=n(29778);let c=e=>{let{upcomingAlbum:t,closeToast:n}=e;return(0,r.jsx)(u.V1,{closeToast:n,albumTitle:t.title,coverUri:t.coverUri,entityTitle:t.title,isPresave:t.isPresave})},d=e=>{let{user:t}=(0,l.oR4)(),{notify:n}=(0,l.d$W)(),[d,m]=(0,a.useState)(!1),{formatMessage:f}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!t.isAuthorized){n((0,r.jsx)(u.Q,{error:f({id:"authorization-messages.need-to-authorizate"})}),{containerId:l.W$x.ERROR});return}if(d)return;let a={...(0,i.ZN)(e),isPresave:!e.isPresave};m(!0);let s=await e.toggleLike();m(!1),s===o.Z.OK?n((0,r.jsx)(c,{upcomingAlbum:a}),{containerId:l.W$x.INFO}):n((0,r.jsx)(u.Q,{error:f({id:"error-messages.error-during-action"})}),{containerId:l.W$x.ERROR})},[t.isAuthorized,d,e,n,f])}},49724:function(e,t,n){"use strict";n.d(t,{kL:function(){return o.Chart},BH:function(){return s},W5:function(){return i}});var r=n(2685);let i=e=>(0,r.pj)({position:e.position,progress:e.progress});var a=n(43068);let s=r.V5.model("Chart",{position:r.V5.maybe(r.V5.number),progress:r.V5.maybe(r.V5.enumeration(Object.values(a.h)))});var o=n(74539)},74539:function(e,t,n){"use strict";n.d(t,{Chart:function(){return v}});var r=n(65301),i=n(9695),a=n(96233),s=n(91207),o=n(37184),l=n(55975),u=n(43068),c=n(82036),d=n(81437),m=n(82605),f=n.n(m);let v=(0,a.Pi)(e=>{let{progress:t,withIcon:n,position:a,weight:m="normal",isDisliked:v,isDisabled:g,className:p,positionClassName:h}=e,{formatMessage:_}=(0,o.Z)(),y=t||n,b=(0,s.useMemo)(()=>{switch(t){case u.h.UP:return"chartUp";case u.h.DOWN:return"chartDown";case u.h.NEW:return"chartNew";default:return"chartSame"}},[t]),k=(0,s.useMemo)(()=>{switch(t){case u.h.UP:return _({id:"entity-names.chart-up"});case u.h.DOWN:return _({id:"entity-names.chart-down"});case u.h.NEW:return _({id:"entity-names.chart-new"});default:return _({id:"entity-names.chart-same"})}},[_,t]);return(0,r.jsxs)("div",{className:(0,i.W)(f().root,p),...(0,l.BA)(l.FK.chart.CHART_PROGRESS),children:[(0,r.jsx)(d.Caption,{variant:"div",weight:m,type:"entity",size:"m",className:(0,i.W)(f().position,h,{[f().position_disliked]:v,[f().position_disabled]:g}),children:a}),y&&(0,r.jsx)(c.Icon,{variant:b,size:"xxs","aria-label":k,className:(0,i.W)(f().progress,f()["progress_".concat(t)],{[f().progress_disliked]:v,[f().progress_disabled]:g}),...(0,l.BA)(l.FK.chart.CHART_PROGRESS_ICON)})]})})},21016:function(e,t,n){"use strict";n.d(t,{I7:function(){return m},kl:function(){return f},b4:function(){return v},at:function(){return a}}),n(40174);var r=n(91207),i=n(56198);let a=(e,t)=>((0,i.uK4)().get(i.Xt8),[(0,r.useMemo)(()=>{if(void 0===t)return{};let n=t-17;return{"--average-color-background":e,transform:"translateY(".concat(t>=17?0:n,"px)"),opacity:1}},[t,!1,e]),(0,r.useMemo)(()=>({"--average-color-background":e}),[e])]);var s=n(65301),o=n(66591),l=n(96233),u=n(62185),c=n(29778);let d=e=>{let{element:t,scrollTop:n,isMobile:r}=e,i=.4*t.clientHeight;return n+(r?60:76)>=t.offsetTop+i},m=(0,l.Pi)(e=>{let{children:t,scrollElement:n,outerTitle:a="",headerElement:l,headerThreshold:m,shouldHideHeader:f}=e,[v,g]=(0,r.useState)(a),[p,h]=(0,r.useState)(null),[_,y]=(0,r.useState)(null),[b,k]=(0,r.useState)(null),[x,P]=(0,r.useState)(!1),[A,C]=(0,r.useState)(!1),[D,M]=(0,r.useState)(!1),[O,T]=(0,r.useState)(!1),{settings:{isMobile:E}}=(0,i.oR4)();(0,r.useLayoutEffect)(()=>{g(a)},[a]);let N=(0,r.useCallback)(()=>{let e=null!=m?m:10,t=l?Number(l.offsetTop)-e:e;t<0&&(t=0);let r=e=>{M(e>t),f&&T(e>30),(null==p?void 0:p.current)&&P(d({element:null==p?void 0:p.current,scrollTop:e,isMobile:E})),(null==_?void 0:_.current)&&C(d({element:null==_?void 0:_.current,scrollTop:e,isMobile:E}))};E?r(window.scrollY):n&&r(n.scrollTop)},[m,l,E,f,p,_,n]);(0,r.useEffect)(()=>{E?0===window.scrollY&&M(!1):n&&0!==n.scrollTop||M(!1)},[n,null==n?void 0:n.scrollTop,E]);let w=(0,r.useMemo)(()=>E?{onScroll:(0,o.Z)(N,200)}:{onScroll:(0,o.Z)(N,200),elementRef:n},[N,n,E]);(0,u.v)(w);let j=(0,r.useMemo)(()=>({title:v,setTitle:g,titleElement:p,scrollElement:E?null:n,setTitleElement:h,childElement:_,setChildElement:y,child:b,setChild:k,isScrolledChild:A,isScrolledTitle:x,isScrolling:D,isHeaderHidden:O}),[v,x,p,n,D,E,b,_,A,O]);return(0,s.jsx)(c.pI.Provider,{value:j,children:t})}),f=e=>{let{children:t,child:n,className:i}=e,{setChildElement:a,setChild:o}=(0,r.useContext)(c.pI),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{(null==l?void 0:l.current)&&a(l),n&&o(n)},[l,n,a,o]),(0,r.useEffect)(()=>()=>{o(null)},[o]),(0,s.jsx)("div",{ref:l,className:i,children:t})},v=e=>{let{children:t,title:n,className:i}=e,{setTitleElement:a,setTitle:o}=(0,r.useContext)(c.pI),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{(null==l?void 0:l.current)&&a(l),n&&o(n)},[l,n,a,o]),(0,r.useEffect)(()=>()=>{o("")},[o]),(0,s.jsx)("div",{ref:l,className:i,children:t})}},26095:function(e,t,n){"use strict";n.d(t,{p:function(){return u.MyMusicDownloadedTracksPage},S:function(){return l}});var r=n(2685),i=n(10420),a=n(3154),s=n(56198);let o=r.V5.model("MyMusicDownloadedTracksPage",{items:r.V5.maybeNull(r.V5.array(a.le)),tracks:r.V5.maybeNull(r.V5.frozen()),loadingState:r.V5.enumeration(Object.values(s.Gui))}).views(e=>({get isNeededToLoad(){return e.loadingState===s.Gui.IDLE},get tracksDurationInMinutes(){var t,n;return(null!==(n=null===(t=e.tracks)||void 0===t?void 0:t.reduce((e,t)=>t.durationMs?e+t.durationMs:e,0))&&void 0!==n?n:0)/1e3/60},get entitiesData(){if(!e.tracks)return[];return e.tracks.map(e=>({type:i.A.Music,meta:e}))},get isEmpty(){var r;return!!(e.loadingState===s.Gui.RESOLVE&&(null===(r=e.items)||void 0===r?void 0:r.length)===0)}})).actions(e=>({getData:(0,r.ls)(function*(t){let{modelActionsLogger:n}=(0,r.dU)(e);if(e.loadingState!==s.Gui.PENDING)try{e.loadingState=s.Gui.PENDING;let n=yield t.getTracks();e.tracks=n,e.items=(0,r.pj)(n.map(e=>(0,a.Vt)(e))),e.loadingState!==s.Gui.IDLE&&(e.loadingState=s.Gui.RESOLVE)}catch(t){n.error(t),e.loadingState!==s.Gui.IDLE&&(e.loadingState=s.Gui.REJECT)}}),reset(){e.items=null,e.tracks=null,e.loadingState=s.Gui.IDLE}})),l=r.V5.model("MyMusicPage",{downloadedTracks:o});var u=n(88648)},88648:function(e,t,n){"use strict";n.d(t,{MyMusicDownloadedTracksPage:function(){return j}});var r=n(65301),i=n(9695),a=n(96233),s=n(91207),o=n(37184),l=n(55975),u=n(19489),c=n(92744),d=n(33387),m=n(36643),f=n(21016),v=n(3154),g=n(56198),p=n(29778),h=n(56910),_=n.n(h),y=n(44729),b=n(82036),k=n(81437),x=n(70930),P=n.n(x);let A=(0,a.Pi)(()=>{var e;let{myMusic:{downloadedTracks:t}}=(0,g.oR4)(),n=(0,r.jsx)(k.Caption,{variant:"span",size:"s",weight:"medium","aria-hidden":!0,children:"•"}),i=[];(null===(e=t.tracks)||void 0===e?void 0:e.length)&&i.push((0,r.jsx)(k.Caption,{variant:"span",size:"s",weight:"medium",lineClamp:1,children:(0,r.jsx)(y.Z,{id:"entity-names.tracks-count",values:{value:t.tracks.length}})}));let a=Math.floor(t.tracksDurationInMinutes/60),o=Math.floor(t.tracksDurationInMinutes%60);return(a||o)&&(i.push(n),i.push((0,r.jsx)(k.Caption,{variant:"span",size:"s",weight:"medium",children:(0,r.jsx)(y.Z,{id:"time.hours-minutes",values:{hours:a,minutes:o}})}))),(0,r.jsx)("div",{className:P().root,children:i.map((e,t)=>(0,s.cloneElement)(e,{key:t}))})});var C=n(67152),D=n.n(C);let M=(0,a.Pi)(()=>{let{isScrolling:e}=(0,s.useContext)(p.pI),t=(0,g.k67)(),{myMusic:{downloadedTracks:n},settings:{isMobile:i},slam:a}=(0,g.oR4)(),{from:o}=(0,g.MhG)({pageId:g.Rhz.OWN_TRACKS,blockId:g.aUg.TRACK_LIST}),{isPlaying:l,togglePlay:c}=(0,g.qmq)({playContextParams:{contextData:{type:u.A.Various,meta:{id:g.Rhz.DOWNLOADS_TRACKS},from:o},entitiesData:n.entitiesData,loadContextMeta:!1}});return(0,r.jsx)("header",{className:D().root,"aria-hidden":e,children:(0,r.jsxs)("div",{className:D().container,children:[!a.isOfflineModeEnabled&&t.canBack&&(0,r.jsx)(p.nP,{withForwardControl:!1,withBackwardControl:t.canBack,buttonSize:"xxs"}),(0,r.jsxs)("div",{className:D().titleContainer,children:[(0,r.jsx)(k.Heading,{variant:"h1",weight:"bold",size:"xs",lineClamp:1,className:D().title,children:(0,r.jsx)(y.Z,{id:"offline.downloaded-tracks"})}),(0,r.jsx)(A,{})]}),!n.isEmpty&&(0,r.jsx)(p.JM,{withRipple:!0,buttonVariant:"default",radius:"xxxl",size:"s",color:"primary",iconSize:"xxs",isPlaying:l,onClick:c,className:D().playButton,ariaHidden:e,tabIndex:e?-1:0,children:!i&&(0,r.jsx)(y.Z,{id:"player-actions.listen"})})]})})});var O=n(59976),T=n.n(O);let E=(0,a.Pi)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:T().root,children:[(0,r.jsx)(b.Icon,{className:T().icon,size:"l",variant:"download"}),(0,r.jsx)(k.Heading,{className:T().title,variant:"div",size:"xs",children:(0,r.jsx)(y.Z,{id:"offline.downloaded-empty"})}),(0,r.jsx)(k.Caption,{className:T().text,variant:"span",type:"controls",size:"l",weight:"normal",children:(0,r.jsx)(y.Z,{id:"offline.download-for-offline"})})]})]})),N=(0,a.Pi)(()=>{let{isScrolling:e}=(0,s.useContext)(p.pI),t=(0,g.k67)(),{myMusic:{downloadedTracks:n},settings:{isMobile:a},slam:o}=(0,g.oR4)(),{from:l}=(0,g.MhG)({pageId:g.Rhz.OWN_TRACKS,blockId:g.aUg.TRACK_LIST}),{isPlaying:c,togglePlay:d}=(0,g.qmq)({playContextParams:{contextData:{type:u.A.Various,meta:{id:g.Rhz.DOWNLOADS_TRACKS},from:l},entitiesData:n.entitiesData,loadContextMeta:!1}});return(0,r.jsx)(p.h4,{variant:"composite","aria-hidden":!e,stickyChild:(0,r.jsxs)("div",{className:D().container,children:[!o.isOfflineModeEnabled&&t.canBack&&(0,r.jsx)(p.nP,{withForwardControl:!1,withBackwardControl:t.canBack,buttonSize:"xxs"}),(0,r.jsx)(k.Heading,{variant:"h1",weight:"bold",size:"xs",lineClamp:1,className:D().stickyTitle,children:(0,r.jsx)(y.Z,{id:"offline.downloaded-tracks"})}),!n.isEmpty&&(0,r.jsx)(p.JM,{withRipple:!0,buttonVariant:"default",radius:"xxxl",size:"s",color:"primary",iconSize:"xxs",isPlaying:c,onClick:d,className:(0,i.W)(D().playButton,{[D().stickyPlayButton]:!a}),ariaHidden:!e,tabIndex:e?0:-1,children:!a&&(0,r.jsx)(y.Z,{id:"player-actions.listen"})})]}),stickyClassName:(0,i.W)(D().stickyHeader,D().important),staticClassName:(0,i.W)(D().staticHeader,D().important)})}),w=[c.aT.IDLE,c.aT.DOWNLOADED],j=(0,a.Pi)(()=>{var e;let{contentScrollRef:t,setContentScrollRef:n}=(0,g.$Y6)(),{formatMessage:a}=(0,o.Z)(),h=(0,g.k67)(),{myMusic:{downloadedTracks:y}}=(0,g.oR4)(),{from:b}=(0,g.MhG)({pageId:g.Rhz.OWN_TRACKS,blockId:g.aUg.TRACK_LIST}),k=(0,g.h1d)(),x=(0,g.iXn)();h.replaceState({href:"/mymusic/downloads/tracks"});let P=(0,d.W)(()=>{k&&y.getData(k)}),A=(0,d.W)(e=>{let{state:t}=e;w.includes(t.loadingState)&&P()});(0,s.useEffect)(()=>{y.isNeededToLoad&&P()},[y.isNeededToLoad,P]),(0,s.useEffect)(()=>(null==k||k.events.on(c.tY.STATE_CHANGED,P),null==k||k.events.on(c.tY.TRACK_CHANGED,A),()=>{null==k||k.events.off(c.tY.STATE_CHANGED,P),null==k||k.events.off(c.tY.TRACK_CHANGED,A),y.reset()}),[y,P,A,k]),(0,g.NOh)(y.loadingState===g.Gui.RESOLVE);let C=(0,s.useMemo)(()=>({Header:()=>(0,r.jsx)(M,{}),Footer:()=>(0,r.jsx)(p.$_,{className:_().footer})}),[]);if(y.loadingState===g.Gui.REJECT)return(0,r.jsx)(m.D,{});if(y.isEmpty)return(0,r.jsx)(E,{});let D=(null===(e=y.items)||void 0===e?void 0:e.length)||10;return(0,r.jsx)(g.Lh6,{pageId:g.Rhz.DOWNLOADS_TRACKS,children:(0,r.jsx)(f.I7,{scrollElement:t,children:(0,r.jsxs)("div",{className:_().pageContainer,children:[(0,r.jsx)(N,{}),(0,r.jsx)(p.Wv,{context:{listAriaLabel:a({id:"offline.downloaded-track-list"})},className:(0,i.W)(_().root,_().important),listClassName:_().content,customComponents:C,totalCount:D,itemContentCallback:e=>{var t;let n=null===(t=y.items)||void 0===t?void 0:t[e];return n?(0,r.jsx)(v.O2,{track:n,playContextParams:x(e,{contextData:{type:u.A.Various,meta:{id:g.Rhz.DOWNLOADS_TRACKS},from:b},entitiesData:y.entitiesData,queueParams:{index:e},loadContextMeta:!1})}):(0,r.jsx)(p.DX,{isActive:!0,className:_().trackShimmer,variant:g.Lxt.PLAYLIST})},debounceDurationInMs:300,initialItemCount:D,handleRef:n,shouldTriggerRangeChangedOnTotalCountChange:!0,testId:l.Br.myMusic.MY_MUSIC_DOWNLOADED_TRACKS_PAGE})]})})})})},36643:function(e,t,n){"use strict";n.d(t,{D:function(){return r.SomethingWentWrong}});var r=n(87407)},87407:function(e,t,n){"use strict";n.d(t,{SomethingWentWrong:function(){return g}});var r=n(65301),i=n(9695),a=n(96233),s=n(91207),o=n(44729),l=n(78372),u=n(82036),c=n(81437),d=n(56198),m=n(29778),f=n(60637),v=n.n(f);let g=(0,a.Pi)(e=>{let{className:t,withBackwardControl:n=!0}=e,a=(0,s.useCallback)(()=>{window.location.href="/"},[]),{contentRef:f}=(0,d.$Y6)();return(0,r.jsxs)("div",{className:(0,i.W)(v().root,t),children:[n&&(0,r.jsx)(m.nP,{withBackwardFallback:"/",className:(0,i.W)(v().navigation,{[v().navigation_desktop]:!f}),withForwardControl:!1}),(0,r.jsxs)("div",{className:(0,i.W)(v().content,{[v().content_shrink]:!n}),children:[(0,r.jsx)(u.Icon,{className:v().icon,variant:"attention",size:"xxl"}),(0,r.jsx)(c.Heading,{className:(0,i.W)(v().title,v().important),variant:"h3",size:"xs",children:(0,r.jsx)(o.Z,{id:"error-messages.something-went-wrong"})}),(0,r.jsxs)(c.Caption,{className:(0,i.W)(v().text,v().important),variant:"span",type:"text",size:"l",weight:"normal",children:[!1,(0,r.jsx)(o.Z,{id:"page-error.try-to-restart-app"})]}),(0,r.jsx)(l.z,{onClick:a,className:v().button,role:"link",color:"secondary",size:"l",radius:"xxxl",children:(0,r.jsxs)(c.Caption,{type:"controls",variant:"span",size:"m",children:[!1,(0,r.jsx)(o.Z,{id:"page-error.restart-app-button"})]})})]})]})})},82605:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"Chart_root__ODed_",position:"Chart_position__7UNY9",position_disliked:"Chart_position_disliked__HzjC7",position_disabled:"Chart_position_disabled__poZzD",progress:"Chart_progress__sGj4s",progress_up:"Chart_progress_up__y083c",progress_same:"Chart_progress_same__Cnbdb",progress_down:"Chart_progress_down__lv_ae",progress_new:"Chart_progress_new__7DobI",progress_disliked:"Chart_progress_disliked__maVAk",progress_disabled:"Chart_progress_disabled__JoFqG"}},70930:function(e){e.exports={root:"MyMusicDownloadedTracksInfo_root__yIYHx"}},56910:function(e){e.exports={root:"MyMusicDownloadedTracksPage_root__hZZwz",important:"MyMusicDownloadedTracksPage_important__QP_t0",pageContainer:"MyMusicDownloadedTracksPage_pageContainer__qu3hF",footer:"MyMusicDownloadedTracksPage_footer__KI5OP",content:"MyMusicDownloadedTracksPage_content__Iz1WY",trackShimmer:"MyMusicDownloadedTracksPage_trackShimmer__MZgW3"}},59976:function(e){e.exports={root:"MyMusicDownloadedTracksPageEmpty_root__LAXpY",icon:"MyMusicDownloadedTracksPageEmpty_icon__PDhk2",title:"MyMusicDownloadedTracksPageEmpty_title__g2w5R",text:"MyMusicDownloadedTracksPageEmpty_text__8RJFg"}},67152:function(e){e.exports={root:"MyMusicDownloadedTracksPageHeader_root__2vfuc",container:"MyMusicDownloadedTracksPageHeader_container__hQ_wt",title:"MyMusicDownloadedTracksPageHeader_title__Ncn5X",stickyTitle:"MyMusicDownloadedTracksPageHeader_stickyTitle__Efl0U",playButton:"MyMusicDownloadedTracksPageHeader_playButton__seWgC",stickyPlayButton:"MyMusicDownloadedTracksPageHeader_stickyPlayButton__JVicd",titleContainer:"MyMusicDownloadedTracksPageHeader_titleContainer__rLAkS",staticHeader:"MyMusicDownloadedTracksPageHeader_staticHeader__LSVC8",important:"MyMusicDownloadedTracksPageHeader_important__JIubq",stickyHeader:"MyMusicDownloadedTracksPageHeader_stickyHeader__MuQh4"}},60637:function(e){e.exports={root:"SomethingWentWrong_root__d77VJ",content:"SomethingWentWrong_content__8_YkJ",content_shrink:"SomethingWentWrong_content_shrink__GOR_7",navigation:"SomethingWentWrong_navigation__a8eMG",navigation_desktop:"SomethingWentWrong_navigation_desktop__WGGBX",icon:"SomethingWentWrong_icon__f15_y",title:"SomethingWentWrong_title__Kn89B",important:"SomethingWentWrong_important__namIb",text:"SomethingWentWrong_text__KEfGc",button:"SomethingWentWrong_button__dmh7t"}},81891:function(e,t,n){"use strict";var r,i;n.d(t,{Z:function(){return r}}),(i=r||(r={})).OK="ok",i.ERROR="error"},3228:function(e,t,n){"use strict";n.d(t,{f:function(){return r},i:function(){return i}});let r=e=>String(e).split(":"),i=(e,t)=>t?[e,t].join(":"):e},43068:function(e,t,n){"use strict";var r,i;n.d(t,{h:function(){return r}}),(i=r||(r={})).UP="up",i.DOWN="down",i.SAME="same",i.NEW="new"},10420:function(e,t,n){"use strict";var r,i;n.d(t,{A:function(){return r}}),(i=r||(r={})).Music="music",i.VibeTrack="vibeTrack",i.Generative="generative",i.Unknown="unknown",i.SmartPreview="smartPreview"}},function(e){e.O(0,[5153,6072,1884,8478,5837,3615,438,7425,85,5453,7873,5493,7311,2845,6455,4631,5537,9778,1694,721,6642,3154,3057,3026,8756,2068,2744,3504,2291,1744],function(){return e(e.s=76860)}),_N_E=e.O()}]);