(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2060],{71471:function(e,n,t){Promise.resolve().then(t.bind(t,13477)),Promise.resolve().then(t.bind(t,82036)),Promise.resolve().then(t.bind(t,93422)),Promise.resolve().then(t.bind(t,89287)),Promise.resolve().then(t.bind(t,43998)),Promise.resolve().then(t.bind(t,82607)),Promise.resolve().then(t.bind(t,77670)),Promise.resolve().then(t.bind(t,81437)),Promise.resolve().then(t.bind(t,56307)),Promise.resolve().then(t.bind(t,17983)),Promise.resolve().then(t.bind(t,13508)),Promise.resolve().then(t.bind(t,27066)),Promise.resolve().then(t.bind(t,54323)),Promise.resolve().then(t.bind(t,65826)),Promise.resolve().then(t.bind(t,57134)),Promise.resolve().then(t.bind(t,86445)),Promise.resolve().then(t.bind(t,23394)),Promise.resolve().then(t.bind(t,13736)),Promise.resolve().then(t.bind(t,74539)),Promise.resolve().then(t.bind(t,39173)),Promise.resolve().then(t.t.bind(t,83181,23)),Promise.resolve().then(t.bind(t,34486)),Promise.resolve().then(t.bind(t,26579)),Promise.resolve().then(t.bind(t,96572)),Promise.resolve().then(t.bind(t,9446)),Promise.resolve().then(t.bind(t,93992)),Promise.resolve().then(t.bind(t,95151)),Promise.resolve().then(t.bind(t,78603)),Promise.resolve().then(t.bind(t,866)),Promise.resolve().then(t.bind(t,24678)),Promise.resolve().then(t.bind(t,53922)),Promise.resolve().then(t.bind(t,5342)),Promise.resolve().then(t.bind(t,99985)),Promise.resolve().then(t.bind(t,16457)),Promise.resolve().then(t.bind(t,2870)),Promise.resolve().then(t.bind(t,4898)),Promise.resolve().then(t.bind(t,73593)),Promise.resolve().then(t.bind(t,76961)),Promise.resolve().then(t.bind(t,93139)),Promise.resolve().then(t.bind(t,90283)),Promise.resolve().then(t.bind(t,30787)),Promise.resolve().then(t.bind(t,83811)),Promise.resolve().then(t.bind(t,87712)),Promise.resolve().then(t.bind(t,15400)),Promise.resolve().then(t.bind(t,24890)),Promise.resolve().then(t.bind(t,98494)),Promise.resolve().then(t.bind(t,98583)),Promise.resolve().then(t.bind(t,3031)),Promise.resolve().then(t.bind(t,59934)),Promise.resolve().then(t.bind(t,75318)),Promise.resolve().then(t.bind(t,68768)),Promise.resolve().then(t.bind(t,87582)),Promise.resolve().then(t.bind(t,51986)),Promise.resolve().then(t.bind(t,95172)),Promise.resolve().then(t.bind(t,77112)),Promise.resolve().then(t.bind(t,22852)),Promise.resolve().then(t.bind(t,53644)),Promise.resolve().then(t.bind(t,367)),Promise.resolve().then(t.t.bind(t,72507,23)),Promise.resolve().then(t.bind(t,35196)),Promise.resolve().then(t.bind(t,17743)),Promise.resolve().then(t.bind(t,89429)),Promise.resolve().then(t.bind(t,22327)),Promise.resolve().then(t.bind(t,18801)),Promise.resolve().then(t.bind(t,75576)),Promise.resolve().then(t.bind(t,38965)),Promise.resolve().then(t.bind(t,47320)),Promise.resolve().then(t.bind(t,86784)),Promise.resolve().then(t.bind(t,37634)),Promise.resolve().then(t.bind(t,57438)),Promise.resolve().then(t.bind(t,84486)),Promise.resolve().then(t.bind(t,98757)),Promise.resolve().then(t.bind(t,40161)),Promise.resolve().then(t.bind(t,67419)),Promise.resolve().then(t.bind(t,35637)),Promise.resolve().then(t.bind(t,55044)),Promise.resolve().then(t.bind(t,97062)),Promise.resolve().then(t.bind(t,54545)),Promise.resolve().then(t.bind(t,25402)),Promise.resolve().then(t.bind(t,16228)),Promise.resolve().then(t.bind(t,46849)),Promise.resolve().then(t.bind(t,18993)),Promise.resolve().then(t.bind(t,21532)),Promise.resolve().then(t.bind(t,37850)),Promise.resolve().then(t.bind(t,62888)),Promise.resolve().then(t.bind(t,24263)),Promise.resolve().then(t.bind(t,95929)),Promise.resolve().then(t.bind(t,41783)),Promise.resolve().then(t.bind(t,20275)),Promise.resolve().then(t.bind(t,48646)),Promise.resolve().then(t.bind(t,95298)),Promise.resolve().then(t.bind(t,61481)),Promise.resolve().then(t.bind(t,78955)),Promise.resolve().then(t.bind(t,87354)),Promise.resolve().then(t.bind(t,88553)),Promise.resolve().then(t.bind(t,24827)),Promise.resolve().then(t.bind(t,80694)),Promise.resolve().then(t.bind(t,51518)),Promise.resolve().then(t.bind(t,23810)),Promise.resolve().then(t.bind(t,87823)),Promise.resolve().then(t.bind(t,18986)),Promise.resolve().then(t.bind(t,89833)),Promise.resolve().then(t.bind(t,13833)),Promise.resolve().then(t.bind(t,13731)),Promise.resolve().then(t.bind(t,82213)),Promise.resolve().then(t.bind(t,3072)),Promise.resolve().then(t.bind(t,87487)),Promise.resolve().then(t.bind(t,11370)),Promise.resolve().then(t.bind(t,47509)),Promise.resolve().then(t.bind(t,8080)),Promise.resolve().then(t.bind(t,76924)),Promise.resolve().then(t.bind(t,53864)),Promise.resolve().then(t.bind(t,66771)),Promise.resolve().then(t.bind(t,45573)),Promise.resolve().then(t.bind(t,80007)),Promise.resolve().then(t.bind(t,83482)),Promise.resolve().then(t.bind(t,50446)),Promise.resolve().then(t.bind(t,89554)),Promise.resolve().then(t.bind(t,76610)),Promise.resolve().then(t.bind(t,60933)),Promise.resolve().then(t.bind(t,70359)),Promise.resolve().then(t.bind(t,93051)),Promise.resolve().then(t.bind(t,70650)),Promise.resolve().then(t.bind(t,57704)),Promise.resolve().then(t.bind(t,43504)),Promise.resolve().then(t.bind(t,89795)),Promise.resolve().then(t.bind(t,48611)),Promise.resolve().then(t.bind(t,47822)),Promise.resolve().then(t.bind(t,96400)),Promise.resolve().then(t.bind(t,98922)),Promise.resolve().then(t.bind(t,76950)),Promise.resolve().then(t.bind(t,32650)),Promise.resolve().then(t.bind(t,20429)),Promise.resolve().then(t.bind(t,35748)),Promise.resolve().then(t.bind(t,84977)),Promise.resolve().then(t.bind(t,65424)),Promise.resolve().then(t.bind(t,24049)),Promise.resolve().then(t.bind(t,8767)),Promise.resolve().then(t.bind(t,25616)),Promise.resolve().then(t.bind(t,29833)),Promise.resolve().then(t.bind(t,45338)),Promise.resolve().then(t.bind(t,20636)),Promise.resolve().then(t.bind(t,21720)),Promise.resolve().then(t.bind(t,47771)),Promise.resolve().then(t.bind(t,46536)),Promise.resolve().then(t.bind(t,39927)),Promise.resolve().then(t.bind(t,47112)),Promise.resolve().then(t.bind(t,44338)),Promise.resolve().then(t.bind(t,2668)),Promise.resolve().then(t.bind(t,54665)),Promise.resolve().then(t.bind(t,39438)),Promise.resolve().then(t.bind(t,39099)),Promise.resolve().then(t.bind(t,94263)),Promise.resolve().then(t.bind(t,6834)),Promise.resolve().then(t.bind(t,13044)),Promise.resolve().then(t.bind(t,40510)),Promise.resolve().then(t.bind(t,61796)),Promise.resolve().then(t.bind(t,57129)),Promise.resolve().then(t.bind(t,25821)),Promise.resolve().then(t.bind(t,13487)),Promise.resolve().then(t.bind(t,82539)),Promise.resolve().then(t.bind(t,43790)),Promise.resolve().then(t.bind(t,68654)),Promise.resolve().then(t.bind(t,14350)),Promise.resolve().then(t.bind(t,6317)),Promise.resolve().then(t.bind(t,32270)),Promise.resolve().then(t.bind(t,67857)),Promise.resolve().then(t.bind(t,84422)),Promise.resolve().then(t.bind(t,97376)),Promise.resolve().then(t.bind(t,10321)),Promise.resolve().then(t.bind(t,16783)),Promise.resolve().then(t.bind(t,56541)),Promise.resolve().then(t.bind(t,85602)),Promise.resolve().then(t.bind(t,2084)),Promise.resolve().then(t.bind(t,89332)),Promise.resolve().then(t.bind(t,56590)),Promise.resolve().then(t.bind(t,48481)),Promise.resolve().then(t.bind(t,31022)),Promise.resolve().then(t.bind(t,26500)),Promise.resolve().then(t.bind(t,90334)),Promise.resolve().then(t.bind(t,86364)),Promise.resolve().then(t.bind(t,34882)),Promise.resolve().then(t.bind(t,77588)),Promise.resolve().then(t.bind(t,60731)),Promise.resolve().then(t.bind(t,5299)),Promise.resolve().then(t.bind(t,94934)),Promise.resolve().then(t.bind(t,89585)),Promise.resolve().then(t.bind(t,19219)),Promise.resolve().then(t.bind(t,38330)),Promise.resolve().then(t.bind(t,88860)),Promise.resolve().then(t.bind(t,40174)),Promise.resolve().then(t.bind(t,9323)),Promise.resolve().then(t.bind(t,45893)),Promise.resolve().then(t.bind(t,17351)),Promise.resolve().then(t.bind(t,88363)),Promise.resolve().then(t.bind(t,48781)),Promise.resolve().then(t.bind(t,82191)),Promise.resolve().then(t.bind(t,77113)),Promise.resolve().then(t.bind(t,21740)),Promise.resolve().then(t.bind(t,56381)),Promise.resolve().then(t.bind(t,90721)),Promise.resolve().then(t.bind(t,46772)),Promise.resolve().then(t.bind(t,16358)),Promise.resolve().then(t.bind(t,72918)),Promise.resolve().then(t.bind(t,1842)),Promise.resolve().then(t.bind(t,79388)),Promise.resolve().then(t.bind(t,99479)),Promise.resolve().then(t.bind(t,14697)),Promise.resolve().then(t.bind(t,49282)),Promise.resolve().then(t.bind(t,79919)),Promise.resolve().then(t.bind(t,18270)),Promise.resolve().then(t.bind(t,5019)),Promise.resolve().then(t.bind(t,4101)),Promise.resolve().then(t.bind(t,67263)),Promise.resolve().then(t.bind(t,2282)),Promise.resolve().then(t.bind(t,70872)),Promise.resolve().then(t.bind(t,4357)),Promise.resolve().then(t.bind(t,36988)),Promise.resolve().then(t.bind(t,38577)),Promise.resolve().then(t.bind(t,79828)),Promise.resolve().then(t.bind(t,50449)),Promise.resolve().then(t.bind(t,95114)),Promise.resolve().then(t.bind(t,92048)),Promise.resolve().then(t.bind(t,72563)),Promise.resolve().then(t.bind(t,14846)),Promise.resolve().then(t.bind(t,1138)),Promise.resolve().then(t.bind(t,99827)),Promise.resolve().then(t.bind(t,1254)),Promise.resolve().then(t.bind(t,55663)),Promise.resolve().then(t.bind(t,99224))},26928:function(e,n,t){"use strict";t.d(n,{Ji:function(){return u}});var r,i,o,s,l=t(72669),a=t(91207),d=t(37184);(r=o||(o={})).formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName",(i=s||(s={})).formatDate="FormattedDateParts",i.formatTime="FormattedTimeParts",i.formatNumber="FormattedNumberParts",i.formatList="FormattedListParts";var m=function(e){var n=(0,d.Z)(),t=e.value,r=e.children,i=(0,l.__rest)(e,["value","children"]);return r(n.formatNumberToParts(t,i))};function v(e){var n=function(n){var t=(0,d.Z)(),r=n.value,i=n.children,o=(0,l.__rest)(n,["value","children"]),s="string"==typeof r?new Date(r||0):r;return i("formatDate"===e?t.formatDateToParts(s,o):t.formatTimeToParts(s,o))};return n.displayName=s[e],n}function h(e){var n=function(n){var t=(0,d.Z)(),r=n.value,i=n.children,o=(0,l.__rest)(n,["value","children"]),s=t[e](r,o);if("function"==typeof i)return i(s);var m=t.textComponent||a.Fragment;return a.createElement(m,null,s)};return n.displayName=o[e],n}m.displayName="FormattedNumberParts",m.displayName="FormattedNumberParts";var u=h("formatDate");h("formatTime"),h("formatNumber"),h("formatList"),h("formatDisplayName"),v("formatDate"),v("formatTime")},67228:function(e,n,t){"use strict";t.d(n,{C:function(){return j},F:function(){return m}});var r,i,o=t(91207),s=t(56198);let l=e=>({serviceSessionId:e.serviceSessionId}),a=e=>{let{target:n,serviceSessionId:t,offersBatchId:r,offersPositionIds:i}=e;return{serviceSessionId:t,target:n,offersBatchId:r,offersPositionIds:i}},d=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{frontSessionStart:t,loadOffersResulted:r}=(0,s.E_I)(n);(0,o.useEffect)(()=>{e.loadingState!==s.Gui.RESOLVE||e.isFrontSessionStartSent||(t(l(e)),e.toggleIsFrontSessionStartSentTrue())},[e,e.loadingState,e.isFrontSessionStartSent,t]),(0,o.useEffect)(()=>{e.loadingState!==s.Gui.RESOLVE||e.isLoadOffersResultSent||(r(a(e)),e.toggleIsLoadOffersResultSentTrue())},[e,e.loadingState,e.isLoadOffersResultSent,r])},m=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{user:t,offers:r}=(0,s.oR4)(),i=r[e],{payment:{environment:l}}=(0,s.uK4)().get(s.U5t);return(0,o.useEffect)(()=>{if(n&&i.isNeededToLoad){let e="production"===l?t.account.uid:void 0;i.getData({uid:e})}},[n,i,i.isNeededToLoad,l,t]),d(i,n),i};var v=t(2685);let h=e=>(0,v.pj)(e),u=e=>{let{plans:n,...t}=e;return(0,v.pj)({...t,plans:n.map(h)})},b=e=>{let{option:n,...t}=e;return(0,v.pj)({...u(t),option:n})},P=e=>{if(!e)return null;let{tariff:n,...t}=e;return(0,v.pj)({...u(t),tariff:n})},c=e=>{let{positionId:n,silentInvoiceAvailable:t,structureType:r,tariffOffer:i,optionOffers:o}=e;return(0,v.pj)({positionId:n,silentInvoiceAvailable:t,structureType:r,tariffOffer:P(i),optionsOffers:o.map(b)})},f=e=>{let{eventSessionId:n,batchPositionId:t,offers:r}=e;return(0,v.pj)({eventSessionId:n,batchPositionId:t,offers:r.map(c)})};(r=i||(i={})).COMPOSITE="COMPOSITE",r.OPTION="OPTION",r.TARIFF="TARIFF";var g=t(36063);let p=v.V5.model({amount:v.V5.number,currency:v.V5.string}),S=v.V5.model({typename:v.V5.literal(g.f.IntroPlan),period:v.V5.string,price:p,repeatCount:v.V5.number}),_=v.V5.model({typename:v.V5.literal(g.f.IntroUntilPlan),price:p,until:v.V5.string}),x=v.V5.model({typename:v.V5.literal(g.f.TrialPlan),period:v.V5.string}),N=v.V5.model({typename:v.V5.literal(g.f.TrialUntilPlan),until:v.V5.string}),C=v.V5.union(S,_,x,N),y=v.V5.model({name:v.V5.string}),O=v.V5.model({additionText:v.V5.string,description:v.V5.string,name:v.V5.string,text:v.V5.string,title:v.V5.string,plans:v.V5.array(C),commonPeriod:v.V5.string,commonPrice:p}),V=O.props({option:y}),T=O.props({tariff:y}),E=v.V5.model({positionId:v.V5.string,silentInvoiceAvailable:v.V5.boolean,structureType:v.V5.enumeration(Object.values(i)),tariffOffer:v.V5.maybeNull(T),optionsOffers:v.V5.array(V)}),I=v.V5.model({eventSessionId:v.V5.string,batchPositionId:v.V5.string,offers:v.V5.array(E)}),R=v.V5.model({loadingState:v.V5.enumeration(Object.values(s.Gui)),isFrontSessionStartSent:v.V5.maybe(v.V5.boolean),isLoadOffersResultSent:v.V5.maybe(v.V5.boolean),data:v.V5.maybeNull(I)}).views(e=>({get isNeededToLoad(){return e.loadingState===s.Gui.IDLE},get isLoading(){return e.loadingState===s.Gui.PENDING},get isLoaded(){return e.loadingState===s.Gui.RESOLVE},get isRejected(){return e.loadingState===s.Gui.REJECT},get isShimmerVisible(){return this.isNeededToLoad||this.isLoading||this.isRejected},get isShimmerActive(){return this.isLoading},get target(){return"music"},get features(){return},get offerPosition(){return 0},get offer(){var n;return null===(n=e.data)||void 0===n?void 0:n.offers[this.offerPosition]},get offersPositionId(){var t;return(null===(t=this.offer)||void 0===t?void 0:t.positionId)||""},get tariffOffer(){var r;return null===(r=this.offer)||void 0===r?void 0:r.tariffOffer},get mainText(){var i;return null===(i=this.tariffOffer)||void 0===i?void 0:i.text},get additionText(){var o;return null===(o=this.tariffOffer)||void 0===o?void 0:o.additionText},get serviceSessionId(){var l;return(null===(l=e.data)||void 0===l?void 0:l.eventSessionId)||""},get offersBatchId(){var a;return(null===(a=e.data)||void 0===a?void 0:a.batchPositionId)||""},get offersPositionIds(){var d;return(null===(d=e.data)||void 0===d?void 0:d.offers.map(e=>e.positionId))||[]}})).actions(e=>({toggleIsFrontSessionStartSentTrue(){e.isFrontSessionStartSent=!0},toggleIsLoadOffersResultSentTrue(){e.isLoadOffersResultSent=!0},getData:(0,v.ls)(function*(n){let{uid:t}=n,{offersResource:r,modelActionsLogger:i}=(0,v.dU)(e);if(e.loadingState!==s.Gui.PENDING){e.isFrontSessionStartSent=!1,e.isLoadOffersResultSent=!1;try{e.loadingState=s.Gui.PENDING;let n=yield r.getCompositeOffers({uid:t,target:e.target,features:e.features}),i=f(n);e.data=i,e.loadingState=s.Gui.RESOLVE}catch(n){e.loadingState=s.Gui.REJECT,i.error(n)}}})})).named("MusicOffers"),j=v.V5.model("Offers",{music:R})},31316:function(e,n,t){"use strict";t.d(n,{Qw:function(){return S},_$:function(){return m},c8:function(){return i},tP:function(){return l}});var r,i,o=t(91207),s=t(56198);let l=e=>{let{target:n,tariffOfferName:t,serviceSessionId:r="",isEnabled:i=!0}=e,{paymentWidgetModal:{modal:l,setTarget:a,setTariffOfferName:d,setServiceSessionId:m}}=(0,s.oR4)();return{open:(0,o.useCallback)(()=>{i&&(a(n),m(r),t&&d(t),l.open())},[d,a,m,n,t,r,l,i]),isOpened:l.isOpened}};var a=t(2685),d=t(91694);(r=i||(i={})).IDLE="idle",r.SUCCESS="success",r.ERROR="error";let m=a.V5.model({modal:d.KL,target:a.V5.string,tariffOfferName:a.V5.string,serviceSessionId:a.V5.string,status:a.V5.enumeration(Object.values(i))}).views(e=>({get isSuccess(){return e.status===i.SUCCESS},get isError(){return e.status===i.ERROR}})).actions(e=>({setTarget(n){e.target=n},setTariffOfferName(n){e.tariffOfferName=n},setServiceSessionId(n){e.serviceSessionId=n},setStatus(n){e.status=n},reset(){e.target="",e.tariffOfferName="",e.serviceSessionId="",e.status=i.IDLE}}));var v=t(65301),h=t(9695),u=t(96233),b=t(2319),P=t(14386);let c=null,f=e=>{let{className:n,target:t,serviceSessionId:r,tariffOfferName:i,onLoad:l,onSuccess:a,onError:d,onClose:m}=e,h=(0,o.useRef)(null),{theme:u}=(0,s.FgM)(),{pwTools:b}=(0,s.N7D)(),P=(0,o.useCallback)(e=>{"purchase_data"===e.type&&(null==a||a())},[a]),f=(0,o.useCallback)(()=>{null==d||d()},[d]),g=(0,o.useCallback)(()=>{null==m||m()},[m]),p=(0,o.useCallback)(e=>{"loaded"===e.data.status&&(null==l||l())},[l]),S=(0,o.useCallback)(async()=>{if(!b||!h.current)return;let{lang:e,mode:n,platform:o,widgetServiceName:s,authMethod:l}=b.options;if(!c)try{c=await b.loadManager()}catch(e){g();return}c.send({type:"init",options:{lang:e,mode:n,platform:o,widgetServiceName:s,authMethod:l,usePlusHost:!0,theme:u,onSuccess:P,onError:f,onReport:p,onClose:g}}),c.send({type:"open",options:{target:t,eventSessionId:r,tariffOfferName:i,targetNode:h.current,isTarifficator:!0}})},[u,b,t,i,r,P,f,p,g]);return(0,o.useEffect)(()=>(S(),()=>{null==c||c.send({type:"close"})}),[S]),(0,v.jsx)("div",{className:n,ref:h})};var g=t(24546),p=t.n(g);let S=(0,u.Pi)(()=>{let{paymentWidgetModal:e,advert:n}=(0,s.oR4)(),{state:t,toggleTrue:r}=(0,b.O)(!1),l=(0,s.SB9)();(0,o.useEffect)(()=>()=>{e.reset()},[e]);let a=(0,o.useCallback)(()=>{e.setStatus(i.SUCCESS),l.track({label:"WCvtCKnr84oYEPnRuvUo"})},[e,l]),d=(0,o.useCallback)(()=>{e.modal.close(),e.isSuccess&&window.location.reload(),e.reset()},[e]),m=(0,o.useCallback)(()=>{e.setStatus(i.ERROR)},[e]);return(0,v.jsx)(P.u,{open:e.modal.isOpened,size:"fitContent",placement:"center",showHeader:!1,withAnimation:!1,className:(0,h.W)(p().root,{[p().root_loaded]:t,[p().root_level_up]:n.isAdvertShown}),contentClassName:p().content,overlayColor:"full",children:(0,v.jsx)(f,{className:p().widget,target:e.target,serviceSessionId:e.serviceSessionId,tariffOfferName:e.tariffOfferName,onLoad:r,onSuccess:a,onError:m,onClose:d})})})},89535:function(e,n,t){"use strict";t.d(n,{CS:function(){return _},xU:function(){return h}});var r=t(99678),i=t(91207),o=t(36063),s=t(67228),l=t(31316),a=t(56198);let d=e=>{let{onClick:n,offerElement:t,isEnabled:r}=e,{element:o}=t||{};(0,i.useEffect)(()=>{if(o&&r)return o.addEventListener("click",n),()=>o.removeEventListener("click",n)},[o,n,r])};var m=t(51304);let v=e=>{var n;let{onShow:t,offerElement:r,isEnabled:o=!0}=e,s=(0,i.useRef)(null),{element:l,intersectionPropertyId:a}=r||{},d=(0,i.useMemo)(()=>l?(s.current=l,[s]):[],[l]),{isIntersecting:v}=null!==(n=(0,m.S1)(d,{preflightCheck:!1},!l||!o)[null!=a?a:""])&&void 0!==n?n:{};(0,i.useEffect)(()=>{v&&t()},[v,t])},h=e=>{let{storeName:n,offerElement:t,isEnabled:m=!0}=e,h=(0,r.useRouter)(),{mainText:u,additionText:b,isShimmerVisible:P,isShimmerActive:c,target:f,tariffOffer:g,serviceSessionId:p,offerPosition:S,offersBatchId:_,offersPositionId:x}=(0,s.F)(n,m),{open:N,isOpened:C}=(0,l.tP)({target:f,serviceSessionId:p,tariffOfferName:null==g?void 0:g.name,isEnabled:m}),{offersShown:y,offersClicked:O}=(0,a.E_I)(m),V=(0,i.useCallback)(()=>{m&&y({serviceSessionId:p,offersBatchId:_,offersPositionId:x,position:S})},[y,p,_,x,S,m]),T=(0,i.useCallback)(()=>{m&&O({serviceSessionId:p,offersBatchId:_,offersPositionId:x})},[O,p,_,x,m]);v({offerElement:t,isEnabled:m,onShow:V}),d({offerElement:t,isEnabled:m,onClick:T});let E=(0,a.uK4)(),I=(0,i.useCallback)(()=>{let e=E.get(a.xit),n=E.get(a.ArX);e.authorizationUrl&&(n.set(a.BUb.Offer,{target:f,serviceSessionId:p,tariffOfferName:null==g?void 0:g.name}),h.push(e.authorizationUrl))},[E,h,f,p,g]);return{mainText:u,additionText:b,isShimmerVisible:P,isShimmerActive:c,trialPlanPeriod:(0,i.useMemo)(()=>{var e,n,t,r;if((null==g?void 0:null===(n=g.plans)||void 0===n?void 0:null===(e=n[0])||void 0===e?void 0:e.typename)===o.f.TrialPlan)return null==g?void 0:null===(r=g.plans)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.period},[g]),openPaymentWidgetModal:N,offersShown:V,offersClicked:T,saveOfferAndAuthorize:I,isPaymentWidgetModalOpened:C}};var u=t(65301),b=t(96233),P=t(44729),c=t(78372),f=t(14386),g=t(81437),p=t(82607);let S=e=>{let{className:n,mainTextClassName:t,additionTextClassName:r,onClick:o,isShimmerActive:s,isShimmerVisible:l,mainText:a,additionText:d,forwardRef:m,...v}=e,h=(0,i.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),null==o||o()},[o]);return l?(0,u.jsx)(p.Shimmer,{className:n,isActive:s,radius:"xxxl"}):(0,u.jsxs)(c.z,{ref:m,className:n,isBlock:!0,color:"plus",variant:"default",size:"l",radius:"xxxl",onClick:h,...v,children:[(0,u.jsx)(g.Caption,{className:t,variant:"div",size:"l",lineClamp:1,children:a}),(0,u.jsx)(g.Caption,{className:r,variant:"div",size:"xs",lineClamp:1,children:d})]})},_=(0,i.forwardRef)((e,n)=>(0,u.jsx)(S,{forwardRef:n,...e}));var x=t(17808),N=t.n(x);let C="buy-subscription-modal",y=(0,b.Pi)(()=>{let e=(0,i.useRef)(null),n=(0,r.useRouter)(),t=(0,a.uK4)().get(a.xit),{openPaymentWidgetModal:o,isShimmerActive:s,isShimmerVisible:l,mainText:d,additionText:m,saveOfferAndAuthorize:v}=h({storeName:"music",offerElement:{element:e.current,intersectionPropertyId:C}}),{modals:{buySubscriptionModal:b},user:p}=(0,a.oR4)(),S=(0,i.useCallback)(()=>{if(b.close(),!p.isAuthorized){v();return}o()},[b,o,v,p.isAuthorized]),x=(0,i.useCallback)(()=>{b.close(),t.authorizationUrl&&n.push(t.authorizationUrl)},[t.authorizationUrl,b,n]);return(0,u.jsxs)(f.u,{className:N().root,headerClassName:N().header,contentClassName:N().content,size:"fitContent",placement:"default",open:b.isOpened,onOpenChange:b.onOpenChange,onClose:b.close,lockScroll:!0,children:[(0,u.jsx)(g.Caption,{className:N().heading,variant:"div",weight:"bold",children:(0,u.jsx)(P.Z,{id:"buy-subscription.listen-without-restrictions",values:{nbsp:"\xa0"}})}),(0,u.jsxs)("div",{className:N().buttons,children:[(0,u.jsx)(_,{ref:e,"data-intersection-property-id":C,mainText:d,additionText:m,isShimmerActive:s,isShimmerVisible:l,onClick:S,className:N().button,mainTextClassName:N().buttonMainText,additionTextClassName:N().buttonAdditionText}),(0,u.jsx)(c.z,{onClick:x,className:N().button,isBlock:!0,color:"secondary",variant:"default",size:"l",radius:"xxxl",children:(0,u.jsx)(g.Caption,{className:N().buttonMainText,variant:"span",weight:"bold",children:(0,u.jsx)(P.Z,{id:"buy-subscription.already-in-plus",values:{nbsp:"\xa0"}})})})]})]})});(0,b.Pi)(e=>{let{children:n}=e,{paymentWidgetModal:t}=(0,a.oR4)(),{shouldShowBuySubscriptionModal:r,showBuySubscriptionModal:o,hideBuySubscriptionModal:s}=(0,a.vLf)();return((0,i.useEffect)(()=>{if(r){if(t.modal.isOpened){s();return}o()}},[s,t.modal.isOpened,r,o]),r)?(0,u.jsxs)(u.Fragment,{children:[n,(0,u.jsx)(y,{})]}):n})},36643:function(e,n,t){"use strict";t.d(n,{D:function(){return r.SomethingWentWrong}});var r=t(87407)},87407:function(e,n,t){"use strict";t.d(n,{SomethingWentWrong:function(){return P}});var r=t(65301),i=t(9695),o=t(96233),s=t(91207),l=t(44729),a=t(78372),d=t(82036),m=t(81437),v=t(56198),h=t(29778),u=t(60637),b=t.n(u);let P=(0,o.Pi)(e=>{let{className:n,withBackwardControl:t=!0}=e,o=(0,s.useCallback)(()=>{window.location.href="/"},[]),{contentRef:u}=(0,v.$Y6)();return(0,r.jsxs)("div",{className:(0,i.W)(b().root,n),children:[t&&(0,r.jsx)(h.nP,{withBackwardFallback:"/",className:(0,i.W)(b().navigation,{[b().navigation_desktop]:!u}),withForwardControl:!1}),(0,r.jsxs)("div",{className:(0,i.W)(b().content,{[b().content_shrink]:!t}),children:[(0,r.jsx)(d.Icon,{className:b().icon,variant:"attention",size:"xxl"}),(0,r.jsx)(m.Heading,{className:(0,i.W)(b().title,b().important),variant:"h3",size:"xs",children:(0,r.jsx)(l.Z,{id:"error-messages.something-went-wrong"})}),(0,r.jsxs)(m.Caption,{className:(0,i.W)(b().text,b().important),variant:"span",type:"text",size:"l",weight:"normal",children:[!1,(0,r.jsx)(l.Z,{id:"page-error.try-to-restart-app"})]}),(0,r.jsx)(a.z,{onClick:o,className:b().button,role:"link",color:"secondary",size:"l",radius:"xxxl",children:(0,r.jsxs)(m.Caption,{type:"controls",variant:"span",size:"m",children:[!1,(0,r.jsx)(l.Z,{id:"page-error.restart-app-button"})]})})]})]})})},24546:function(e){e.exports={root:"PaymentWidgetModal_root__I6Hrp",root_loaded:"PaymentWidgetModal_root_loaded__Rzltj",root_level_up:"PaymentWidgetModal_root_level_up__pj52G",content:"PaymentWidgetModal_content__ifRry",widget:"PaymentWidgetModal_widget__cu_gr"}},17808:function(e){e.exports={root:"BuySubscriptionModal_root__5LvlX",content:"BuySubscriptionModal_content__v06Ju",heading:"BuySubscriptionModal_heading__07nBE",buttons:"BuySubscriptionModal_buttons__wSCRP",button:"BuySubscriptionModal_button__8m6Dx",buttonMainText:"BuySubscriptionModal_buttonMainText__pyjEc",buttonAdditionText:"BuySubscriptionModal_buttonAdditionText__rdKJn",header:"BuySubscriptionModal_header__ho5hr"}},60637:function(e){e.exports={root:"SomethingWentWrong_root__d77VJ",content:"SomethingWentWrong_content__8_YkJ",content_shrink:"SomethingWentWrong_content_shrink__GOR_7",navigation:"SomethingWentWrong_navigation__a8eMG",navigation_desktop:"SomethingWentWrong_navigation_desktop__WGGBX",icon:"SomethingWentWrong_icon__f15_y",title:"SomethingWentWrong_title__Kn89B",important:"SomethingWentWrong_important__namIb",text:"SomethingWentWrong_text__KEfGc",button:"SomethingWentWrong_button__dmh7t"}},36063:function(e,n,t){"use strict";var r,i;t.d(n,{f:function(){return r}}),(i=r||(r={})).IntroPlan="IntroPlan",i.IntroUntilPlan="IntroUntilPlan",i.TrialPlan="TrialPlan",i.TrialUntilPlan="TrialUntilPlan"}},function(e){e.O(0,[5153,6072,1884,438,9823,7425,145,85,5453,7873,5493,7311,2845,9778,1694,721,4709,6642,3154,4474,437,8385,1783,3504,2291,1744],function(){return e(e.s=71471)}),_N_E=e.O()}]);