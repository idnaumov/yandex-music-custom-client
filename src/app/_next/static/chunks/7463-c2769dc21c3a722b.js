"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7463],{77463:function(e,t,a){a.d(t,{rT:function(){return N.GenreAlbumsPage},eq:function(){return y.GenreArtistsPage},a0:function(){return E.GenrePage},Kx:function(){return S},Fe:function(){return G.GenrePlaylistsPage}});var l=a(2685),i=a(49430),s=a(54709),r=a(81706),n=a(9096),u=a(56198),o=a(91694);let g=l.V5.model("GenreAlbumsPage",{loadingState:l.V5.enumeration(Object.values(u.Gui)),pager:l.V5.maybeNull(o.Vn),alreadyRequestedPages:l.V5.map(l.V5.number),pendingPages:l.V5.map(l.V5.number),requests:l.V5.maybeNull(l.V5.number),errorStatusCode:l.V5.maybeNull(l.V5.number),fullTitle:l.V5.maybeNull(l.V5.string),items:l.V5.array(l.V5.maybeNull(s.ug))}).views(e=>({get isNotFound(){var t;let a=e.loadingState===u.Gui.RESOLVE&&(null===(t=e.pager)||void 0===t?void 0:t.total)===0,l=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===u.Gui.REJECT&&l||a},get isSomethingWrong(){return e.loadingState===u.Gui.REJECT&&!this.isNotFound}})).actions(e=>({getData:(0,l.ls)(function*(t){let{metatagId:a,page:r=0,pageSize:n=20,preloadedMeta:o}=t,{metatagsResource:g,modelActionsLogger:d}=(0,l.dU)(e);if(!(e.loadingState===u.Gui.PENDING&&e.pendingPages.has("".concat(r))||e.alreadyRequestedPages.has("".concat(r)))){"number"==typeof r&&e.alreadyRequestedPages.set("".concat(r),r);try{var m;e.loadingState=u.Gui.PENDING,e.pendingPages.set("".concat(r),r);let t=o;t||(t=yield g.getMetatagAlbums({id:a,offset:r,limit:n})),e.fullTitle=t.title.fullTitle;let i={page:r,perPage:n,total:t.pager.total};0===e.items.length&&(e.items=(0,l.pj)(Array.from({length:i.total},()=>null)));let d=t.albums.map(s.ym);(0,u.AG_)({items:e.items,mappedRawItems:d,page:r,pageSize:n}),e.pager=i,e.requests=(null!==(m=e.requests)&&void 0!==m?m:0)+1,e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.RESOLVE)}catch(t){d.error(t),t instanceof i.du&&(t.statusCode===i.CN.NOT_FOUND||t.statusCode===i.CN.BAD_REQUEST)&&(e.errorStatusCode=i.CN.NOT_FOUND),e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.REJECT)}finally{e.pendingPages.delete("".concat(r))}}}),reset(){e.loadingState=u.Gui.IDLE,e.pendingPages.clear(),e.pager=null,e.alreadyRequestedPages.clear(),e.errorStatusCode=null,e.items=(0,l.pj)([])}})),d=l.V5.model("GenreArtistsPage",{loadingState:l.V5.enumeration(Object.values(u.Gui)),pager:l.V5.maybeNull(o.Vn),alreadyRequestedPages:l.V5.map(l.V5.number),pendingPages:l.V5.map(l.V5.number),requests:l.V5.maybeNull(l.V5.number),errorStatusCode:l.V5.maybeNull(l.V5.number),fullTitle:l.V5.maybeNull(l.V5.string),items:l.V5.array(l.V5.maybeNull(n.Go))}).views(e=>({get isNotFound(){var t;let a=e.loadingState===u.Gui.RESOLVE&&(null===(t=e.pager)||void 0===t?void 0:t.total)===0,l=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===u.Gui.REJECT&&l||a},get isSomethingWrong(){return e.loadingState===u.Gui.REJECT&&!this.isNotFound}})).actions(e=>({getData:(0,l.ls)(function*(t){let{metatagId:a,page:s=0,pageSize:r=20,preloadedMeta:o}=t,{metatagsResource:g,modelActionsLogger:d}=(0,l.dU)(e);if(!(e.loadingState===u.Gui.PENDING&&e.pendingPages.has("".concat(s))||e.alreadyRequestedPages.has("".concat(s)))){"number"==typeof s&&e.alreadyRequestedPages.set("".concat(s),s);try{var m;e.loadingState=u.Gui.PENDING,e.pendingPages.set("".concat(s),s);let t=o;t||(t=yield g.getMetatagArtists({id:a,offset:s,limit:r,period:"week"})),e.fullTitle=t.title.fullTitle;let i={page:s,perPage:r,total:t.pager.total};0===e.items.length&&(e.items=(0,l.pj)(Array.from({length:i.total},()=>null)));let d=t.artists.map(e=>(0,n.d)(e.artist));(0,u.AG_)({items:e.items,mappedRawItems:d,page:s,pageSize:r}),e.pager=i,e.requests=(null!==(m=e.requests)&&void 0!==m?m:0)+1,e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.RESOLVE)}catch(t){d.error(t),t instanceof i.du&&(t.statusCode===i.CN.NOT_FOUND||t.statusCode===i.CN.BAD_REQUEST)&&(e.errorStatusCode=i.CN.NOT_FOUND),e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.REJECT)}finally{e.pendingPages.delete("".concat(s))}}}),reset(){e.loadingState=u.Gui.IDLE,e.pendingPages.clear(),e.pager=null,e.alreadyRequestedPages.clear(),e.errorStatusCode=null,e.items=(0,l.pj)([])}}));var m=a(50684);let c=l.V5.model("GenrePlaylistsPage",{loadingState:l.V5.enumeration(Object.values(u.Gui)),pager:l.V5.maybeNull(o.Vn),alreadyRequestedPages:l.V5.map(l.V5.number),pendingPages:l.V5.map(l.V5.number),requests:l.V5.maybeNull(l.V5.number),errorStatusCode:l.V5.maybeNull(l.V5.number),fullTitle:l.V5.maybeNull(l.V5.string),items:l.V5.array(l.V5.maybeNull(m.Cd))}).views(e=>({get isNotFound(){var t;let a=e.loadingState===u.Gui.RESOLVE&&(null===(t=e.pager)||void 0===t?void 0:t.total)===0,l=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===u.Gui.REJECT&&l||a},get isSomethingWrong(){return!this.isNotFound&&e.loadingState===u.Gui.REJECT&&0===e.alreadyRequestedPages.size}})).actions(e=>({getData:(0,l.ls)(function*(t){let{metatagId:a,page:i=0,pageSize:s=20,preloadedMeta:r}=t,{metatagsResource:n,modelActionsLogger:o}=(0,l.dU)(e);if(!(e.loadingState===u.Gui.PENDING&&e.pendingPages.has("".concat(i))||e.alreadyRequestedPages.has("".concat(i)))){"number"==typeof i&&e.alreadyRequestedPages.set("".concat(i),i);try{var g;e.loadingState=u.Gui.PENDING,e.pendingPages.set("".concat(i),i);let t=r;t||(t=yield n.getMetatagPlaylists({id:a,offset:i,limit:s,withLikesCount:!0})),e.fullTitle=t.title.fullTitle;let o={page:i,perPage:s,total:t.pager.total};0===e.items.length&&(e.items=(0,l.pj)(Array.from({length:o.total},()=>null)));let d=t.playlists.map(m.PV);(0,u.AG_)({items:e.items,mappedRawItems:d,page:i,pageSize:s}),e.pager=o,e.requests=(null!==(g=e.requests)&&void 0!==g?g:0)+1,e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.RESOLVE)}catch(t){o.error(t),e.alreadyRequestedPages.delete("".concat(i)),e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.REJECT)}finally{e.pendingPages.delete("".concat(i))}}}),reset(){e.loadingState=u.Gui.IDLE,e.pendingPages.clear(),e.pager=null,e.alreadyRequestedPages.clear(),e.errorStatusCode=null,e.items=(0,l.pj)([])}})),S=l.V5.model("GenrePage",{id:l.V5.maybeNull(l.V5.string),errorStatusCode:l.V5.maybeNull(l.V5.number),loadingState:l.V5.enumeration(Object.values(u.Gui)),fullTitle:l.V5.maybeNull(l.V5.string),artists:l.V5.array(n.Go),albums:l.V5.array(s.ug),playlists:l.V5.array(r.d2),albumsSubpage:g,artistsSubpage:d,playlistsSubpage:c}).views(e=>({get isLoading(){return e.loadingState===u.Gui.IDLE||e.loadingState===u.Gui.PENDING},get hasAlbums(){return e.loadingState===u.Gui.IDLE||e.loadingState===u.Gui.PENDING||e.albums.length>0},get hasArtists(){return e.loadingState===u.Gui.IDLE||e.loadingState===u.Gui.PENDING||e.artists.length>0},get hasPlaylists(){return e.loadingState===u.Gui.IDLE||e.loadingState===u.Gui.PENDING||e.playlists.length>0},get isNotFound(){let t=e.loadingState===u.Gui.RESOLVE&&!this.hasAlbums&&!this.hasArtists&&!this.hasPlaylists,a=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===u.Gui.REJECT&&a||t}})).actions(e=>({getData:(0,l.ls)(function*(t){let{id:a,preloadedMeta:o}=t,{metatagsResource:g,modelActionsLogger:d}=(0,l.dU)(e);if(e.loadingState!==u.Gui.PENDING)try{e.loadingState=u.Gui.PENDING;let t=o;t||(t=yield g.getMetatagById({id:a})),e.id=t.id,e.fullTitle=t.title.fullTitle,e.artists=(0,l.pj)(t.artists.map(n.d)),e.albums=(0,l.pj)(t.albums.map(s.ym)),e.playlists=(0,l.pj)(t.playlists.map(r.Q9)),e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.RESOLVE)}catch(t){d.error(t),t instanceof i.du&&(t.statusCode===i.CN.NOT_FOUND||t.statusCode===i.CN.BAD_REQUEST)&&(e.errorStatusCode=i.CN.NOT_FOUND),e.loadingState!==u.Gui.IDLE&&(e.loadingState=u.Gui.REJECT)}}),reset(){e.loadingState=u.Gui.IDLE,e.fullTitle=null,e.artists=(0,l.pj)([]),e.albums=(0,l.pj)([]),e.playlists=(0,l.pj)([])}}));var N=a(76651),y=a(35156);a(32523);var E=a(23865),G=a(854);a(21535);var p=a(91207),V=a(85933);let P=async(e,t)=>{if(!e)return{tld:"",locale:null,host:"",fullUrl:null,url:null};try{let{container:a,backendHostTld:l,locale:i,host:s,fullUrl:r,requestUrl:n}=await (0,u.rbP)(),o=a.get(u.ZOY);return{genreMeta:await t(o,e),tld:l,locale:i,host:s,fullUrl:r,url:n}}catch(e){return{tld:"",locale:null,host:"",fullUrl:null,url:null}}};(0,p.cache)(async e=>P(e,async(e,t)=>e.getMetatagAlbums({id:t,offset:0,limit:V.O}))),(0,p.cache)(async e=>P(e,async(e,t)=>e.getMetatagArtists({id:t,offset:0,limit:V.O,period:"week"}))),(0,p.cache)(async e=>P(e,async(e,t)=>e.getMetatagById({id:t}))),(0,p.cache)(async e=>P(e,async(e,t)=>e.getMetatagPlaylists({id:t,offset:0,limit:V.O,withLikesCount:!0})))}}]);