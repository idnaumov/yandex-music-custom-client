(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1783],{222:function(e,t,i){"use strict";i.d(t,{ap:function(){return Y},Ux:function(){return m}});var n,a,s=i(56198);let o=e=>!!e&&e.some(e=>{let[t]=(null==e?void 0:e.split(":"))||[];return e===s.sHr||t&&s.kF5.includes(t)});var l=i(2685);let r=e=>{let{type:t,tag:i}=e.id;return{title:e.name,seed:"".concat(t,":").concat(i),specialContext:e.specialContext,specialContextImage:e.specialContextImage}},c=e=>({value:e.value,title:e.name,seed:e.serializedSeed,imageUrl:e.imageUrl}),d=(e,t)=>{let i=[];return t.possibleValues.forEach(e=>{e.unspecified||i.push(c(e))}),{type:e,title:t.name,values:(0,l.pj)(i)}};(n=a||(a={})).DIVERSITY="diversity",n.MOOD_ENERGY="moodEnergy",n.LANGUAGE="language";let u=l.V5.model("ContextItem",{title:l.V5.string,seed:l.V5.string,specialContext:l.V5.boolean,specialContextImage:l.V5.optional(l.V5.string,"")}),g=l.V5.model("RestrictonValue",{value:l.V5.string,title:l.V5.string,seed:l.V5.string,imageUrl:l.V5.maybe(l.V5.string)}),_=l.V5.model("Restricton",{type:l.V5.enumeration(Object.values(a)),title:l.V5.string,values:l.V5.array(g)}),m=l.V5.model("VibeSettings",{loadingState:l.V5.enumeration(Object.values(s.Gui)),contextItems:l.V5.array(u),diversity:l.V5.maybeNull(_),moodEnergy:l.V5.maybeNull(_),language:l.V5.maybeNull(_)}).views(e=>({get isNeededToLoad(){return e.loadingState===s.Gui.IDLE}})).actions(e=>({getData:(0,l.ls)(function*(t){let{rotorResource:i,modelActionsLogger:n}=(0,l.dU)(e);if(e.loadingState!==s.Gui.PENDING)try{var o,c,u,g;e.loadingState=s.Gui.PENDING;let n=yield i.waveSettings(t);(null==n?void 0:null===(o=n.settingRestrictions)||void 0===o?void 0:o.diversity)&&(e.diversity=d(a.DIVERSITY,n.settingRestrictions.diversity)),(null==n?void 0:null===(c=n.settingRestrictions)||void 0===c?void 0:c.moodEnergy)&&(e.moodEnergy=d(a.MOOD_ENERGY,n.settingRestrictions.moodEnergy)),(null==n?void 0:null===(u=n.settingRestrictions)||void 0===u?void 0:u.language)&&(e.language=d(a.LANGUAGE,n.settingRestrictions.language));let _=Array.isArray(null==n?void 0:n.blocks)&&(null==n?void 0:null===(g=n.blocks)||void 0===g?void 0:g.find(e=>(null==e?void 0:e.type)==="contexts"));_&&Array.isArray(_.items)&&(e.contextItems=(0,l.pj)(_.items.map(r))),e.loadingState!==s.Gui.IDLE&&(e.loadingState=s.Gui.RESOLVE)}catch(t){n.error(t),e.loadingState!==s.Gui.IDLE&&(e.loadingState=s.Gui.REJECT)}}),reset(){e.loadingState=s.Gui.IDLE,e.contextItems=(0,l.pj)([]),e.diversity=null,e.moodEnergy=null,e.language=null}}));var b=i(65301),p=i(96233),v=i(91207),x=i(37184),h=i(44729),E=i(55975),y=i(60383),B=i(78372),N=i(82036),S=i(32547),I=i(92249),V=i(81437);let f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,i]=(0,v.useState)(e),{contentRef:n}=(0,s.$Y6)();return(0,v.useEffect)(()=>{let e=new ResizeObserver(e=>{let[n]=e||[];n&&n.contentRect.height!==t&&i(n.contentRect.height)});return n&&e.observe(n),()=>{e.disconnect()}},[t,n]),{contentHeight:t}};var R=i(9695),j=i(22455),C=i(48291),T=i.n(C);let G=e=>{let{title:t,children:i,restrictionsClassName:n,...a}=e;return(0,b.jsxs)("section",{className:T().root,...(0,s.tEg)(a),children:[(0,b.jsx)(V.Caption,{variant:"span",type:"text",size:"m",weight:"medium","aria-hidden":!0,children:t}),(0,b.jsx)(j.y,{children:(0,b.jsx)(V.Heading,{variant:"h4",children:t})}),(0,b.jsx)("div",{className:(0,R.W)(T().restrictions,n),children:i})]})};var k=i(93422);let L=e=>{var t,i,n;let{seed:a,title:o,isStation:l}=e,{vibe:r}=(0,s.oR4)(),{applySetting:c}=(0,s.QhE)({seeds:null!==(n=null===(t=r.meta)||void 0===t?void 0:t.seeds)&&void 0!==n?n:[],pageIdForFrom:s.Rhz.HOME,blockIdForFrom:s.BEo.RUP_MAIN_RADIO}),{formatMessage:d}=(0,x.Z)(),u=!!(null===(i=r.meta)||void 0===i?void 0:i.seeds.includes(a)),g=r.applyingSetting===a,_=(0,v.useMemo)(()=>u?"".concat(d({id:"vibe-actions.remove"})," ").concat(o):"".concat(d({id:"vibe-actions.apply"})," ").concat(o),[u,o,d]);return{isApplying:g,isSelected:u,ariaLabel:_,ariaPressed:u,onClickHandler:(0,v.useCallback)(async()=>{r.setApplyingSetting(a),await c(a,l),r.setApplyingSetting()},[c,l,a,r])}};var A=i(11701),z=i.n(A);let O=(0,p.Pi)(e=>{let{item:t}=e,{vibe:i}=(0,s.oR4)(),n=(0,v.useRef)(null),{isApplying:a,isSelected:o,ariaPressed:l,onClickHandler:r}=L({seed:t.seed,title:t.title,isStation:!0}),c=(0,v.useCallback)(e=>{i.isLoading||(n.current&&(0,y.m)(e,z().ripple,n.current),r())},[r,i.isLoading]);return(0,b.jsxs)(B.z,{radius:"xxxl",className:(0,R.W)(z().button,z().textButton,{[z().button_selected]:o,[z().button_applying]:a,[z().specialButton]:t.specialContext}),onClick:c,"aria-disabled":i.isLoading,"aria-pressed":l,withRipple:!1,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_CONTEXT_BUTTON),children:[t.specialContext&&(0,b.jsx)(k.Image,{className:z().specialImage,src:t.specialContextImage,size:100,fit:"cover",withAvatarReplace:!0}),(0,b.jsx)(V.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",className:z().title,children:t.title}),(0,b.jsx)("div",{className:z().rippleContainer,ref:n})]})}),M=(0,p.Pi)(e=>{let{type:t,restrictionValue:i}=e,{vibe:n}=(0,s.oR4)(),o=(0,v.useRef)(null),{isApplying:l,isSelected:r,ariaPressed:c,onClickHandler:d}=L({seed:i.seed,title:i.title}),u=(0,v.useCallback)(e=>{n.isLoading||(o.current&&(0,y.m)(e,z().ripple,o.current),d())},[d,n.isLoading]),g=(0,v.useMemo)(()=>(0,b.jsx)(V.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",className:z().title,children:i.title}),[i.title]);switch(t){case a.DIVERSITY:return(0,b.jsxs)(B.z,{className:(0,R.W)(z().button,z().diversityButton,{[z().button_selected]:r,[z().button_applying]:l}),radius:"xl","aria-disabled":n.isLoading,"aria-pressed":c,onClick:u,withRipple:!1,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_DIVERSITY_BUTTON),children:[(0,b.jsx)(k.Image,{"aria-hidden":!0,src:i.imageUrl,fit:"contain",width:40,height:40,withAvatarReplace:!0,className:z().diversityButtonImage}),g,(0,b.jsx)("div",{className:z().rippleContainer,ref:o})]});case a.MOOD_ENERGY:return(0,b.jsxs)("div",{className:z().moodEnergy,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_MOOD_ENERGY_BUTTON),children:[(0,b.jsx)(B.z,{variant:"text",className:(0,R.W)(z().button,z().moodEnergyButton,{[z().button_selected]:r,[z().button_applying]:l}),radius:"round",onClick:u,withRipple:!1,"aria-disabled":n.isLoading,"aria-pressed":c,"aria-label":i.title,children:(0,b.jsx)(k.Image,{src:i.imageUrl,fit:"contain",width:52,height:52,"aria-hidden":!0,withAvatarReplace:!0,className:z().moodEnergyButtonImage})}),(0,b.jsx)("span",{"aria-hidden":!0,children:g})]});case a.LANGUAGE:return(0,b.jsxs)(B.z,{radius:"xxxl",className:(0,R.W)(z().button,z().textButton,{[z().button_selected]:r,[z().button_applying]:l}),onClick:u,withRipple:!1,"aria-disabled":n.isLoading,"aria-pressed":c,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_LANGUAGE_BUTTON),children:[g,(0,b.jsx)("div",{className:z().rippleContainer,ref:o})]});default:return null}});var P=i(78996),U=i.n(P);let w=(0,p.Pi)(()=>{let{vibeSettings:e}=(0,s.oR4)(),{formatMessage:t}=(0,x.Z)();return e.isNeededToLoad&&e.getData(),(0,b.jsxs)("div",{className:U().root,children:[e.contextItems.length>0&&(0,b.jsx)(G,{title:t({id:"interface-actions.my-vibe-context-settings"}),restrictionsClassName:U().contextItems,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_CONTEXT_BLOCK),children:e.contextItems.map(e=>(0,b.jsx)(O,{item:e,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_CONTEXT_BUTTON)},e.seed))}),e.diversity&&(0,b.jsx)(G,{title:e.diversity.title,restrictionsClassName:U().diversity,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_DIVERSITY_BLOCK),children:e.diversity.values.map(t=>{var i;return(0,b.jsx)(M,{type:null===(i=e.diversity)||void 0===i?void 0:i.type,restrictionValue:t},t.value)})}),e.moodEnergy&&(0,b.jsx)(G,{title:e.moodEnergy.title,restrictionsClassName:U().moodEnergy,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_MOOD_ENERGY_BLOCK),children:e.moodEnergy.values.map(t=>{var i;return(0,b.jsx)(M,{type:null===(i=e.moodEnergy)||void 0===i?void 0:i.type,restrictionValue:t},t.value)})}),e.language&&(0,b.jsx)(G,{title:e.language.title,restrictionsClassName:U().contextItems,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_LANGUAGE_BLOCK),children:e.language.values.map(t=>{var i;return(0,b.jsx)(M,{type:null===(i=e.language)||void 0===i?void 0:i.type,restrictionValue:t},t.value)})})]})});var D=i(73074),W=i.n(D);let F={duration:300,initial:{transform:"translateX(5%)",opacity:0},open:{transform:"translateX(0)",opacity:1},close:{transform:"translateX(5%)",opacity:0}},Y=(0,p.Pi)(()=>{var e,t,i,n;let{formatMessage:a}=(0,x.Z)(),{vibe:l,settings:{isMobile:r},vibeSettings:c}=(0,s.oR4)(),{pageId:d}=(0,s.lVB)(),{blockIdForFrom:u}=(0,s.qYG)(),g=(0,v.useRef)(null),_=(0,v.useRef)(null),{resetSettings:m}=(0,s.QhE)({seeds:null!==(n=null===(e=l.meta)||void 0===e?void 0:e.seeds)&&void 0!==n?n:[],pageIdForFrom:d,blockIdForFrom:u}),{contentRef:p}=(0,s.$Y6)(),{contentHeight:R}=f(0),[j,C]=(0,v.useState)(!1);(0,v.useEffect)(()=>()=>{c.reset()},[c]);let T=(0,v.useCallback)(()=>{C(!1)},[C]),G=(0,v.useMemo)(()=>r?{height:"88vh"}:p?{insetInlineEnd:7,insetBlockStart:p.offsetTop+7,height:R-16}:{},[R,p,r]),k=!!(l.isLoading||l.isMyVibe),L=(0,v.useCallback)(e=>{if(!l.isLoading){var t;g.current&&(0,y.m)(e,W().ripple,g.current),m(),null===(t=_.current)||void 0===t||t.focus()}},[m,l.isLoading]),A=(0,v.useMemo)(()=>{var e,t;if(o(null===(e=l.meta)||void 0===e?void 0:e.seeds))return(null===(t=l.meta)||void 0===t?void 0:t.context)?(0,b.jsx)(B.z,{className:W().toggleSettingsButton,size:"m",radius:"round",icon:(0,b.jsx)(N.Icon,{variant:"filter",size:"xs"}),"aria-label":a({id:"vibe-actions.aria-label-settings"}),...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_BUTTON)}):(0,b.jsx)(B.z,{className:W().toggleSettingsButton,size:"default",radius:"xxxl",icon:(0,b.jsx)(N.Icon,{variant:"filter",size:"xxs"}),"aria-label":a({id:"vibe-actions.aria-label-settings"}),...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_BUTTON),children:(0,b.jsx)(V.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",children:(0,b.jsx)(h.Z,{id:"interface-actions.configure-my-vibe"})})})},[a,null===(t=l.meta)||void 0===t?void 0:t.context,null===(i=l.meta)||void 0===i?void 0:i.seeds]);return(0,b.jsxs)(S.J2,{placement:"bottom",isMobile:r,strategy:"fixed",transform:!1,portalNode:p,positionElement:p,disableFloatingStyles:!r,open:j,onOpenChange:C,style:G,overlayClassName:W().overlay,transition:F,children:[A,(0,b.jsx)(S.yk,{className:W().popover,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_BLOCK),children:(0,b.jsxs)("div",{className:W().root,children:[(0,b.jsxs)("div",{className:W().header,children:[(0,b.jsx)(V.Heading,{variant:"h3",size:"s",weight:"bold",...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_TITLE),children:(0,b.jsx)(h.Z,{id:"interface-actions.my-vibe-settings"})}),(0,b.jsxs)("div",{className:W().actions,children:[(0,b.jsx)(I.u,{offsetOptions:4,placement:"left",text:a({id:"interface-actions.reset-my-vibe-settings"}),children:(0,b.jsx)(B.z,{variant:"outline",radius:"round",size:"xxxs",icon:(0,b.jsx)(N.Icon,{variant:"reset",size:"xxxs"}),onClick:L,disabled:!!l.isMyVibe,"aria-hidden":!!l.isMyVibe,"aria-disabled":k,"aria-label":a({id:"interface-actions.reset-my-vibe-settings"}),ref:g,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_RESET_BUTTON)})}),(0,b.jsx)(B.z,{radius:"round",color:"secondary",size:"xxs",icon:(0,b.jsx)(N.Icon,{variant:"close",size:"xxs"}),onClick:T,"aria-label":a({id:"interface-actions.close-my-vibe-settings"}),ref:_,...(0,E.BA)(E.bG.vibeSettings.VIBE_SETTINGS_CLOSE_BUTTON)})]})]}),(0,b.jsx)(w,{})]})})]})})},41783:function(e,t,i){"use strict";i.d(t,{MainPage:function(){return I}});var n=i(65301),a=i(9695),s=i(96233),o=i(99678),l=i(91207),r=i(37184),c=i(55975),d=i(62043),u=i(91878),g=i(78372),_=i(46642),m=i(92249),b=i(81437),p=i(28385),v=i(36643),x=i(63961),h=i(77702),E=i(21016),y=i(56198),B=i(29778),N=i(41856),S=i.n(N);let I=(0,s.Pi)(e=>{let{withVideoModal:t}=e,{main:i,user:s,experiments:N,releaseNotes:I,fullscreenVideoPlayer:V}=(0,y.oR4)(),{formatMessage:f}=(0,r.Z)(),R=(0,y.bop)(),{contentScrollRef:j,setContentScrollRef:C}=(0,y.$Y6)(),[T,G]=(0,u.z)(),k=(0,o.useSearchParams)().get(y.wxR.IDS),L=(0,h.Yd)(k),A=N.checkExperiment(y.peG.WebNextClips,"on"),[z]=L;t&&A&&z&&(V.setIds(L),V.modal.open()),(0,l.useEffect)(()=>()=>i.landing.reset(),[i.landing]),(0,y.NOh)(i.landing.loadingState===y.Gui.RESOLVE);let O=N.checkExperiment(y.peG.WebNextDisableVibe,"on"),M=(0,l.useCallback)(()=>{I.isReady&&I.modal.open()},[I.isReady,I.modal]),P=(0,l.useMemo)(()=>O?{"margin-block-start":"1vh"}:{},[O]),U=(0,l.useMemo)(()=>{if(N.checkExperiment(y.peG.WebNextBetaLabel,"off"))return null;{let e=N.checkExperiment(y.peG.WebNextBetaLabel,"version"),t=f({id:"desktop.app-version"},{version:R}),i=e?R:"Beta";return(0,n.jsxs)(m.u,{placement:"right",offsetOptions:4,children:[(0,n.jsx)(g.z,{color:"secondary",radius:"xl","aria-label":e?t:"Beta ".concat(t),className:(0,a.W)(S().beta,{[S().beta_withReleaseNotes]:I.isReady}),onClick:M,children:(0,n.jsx)(b.Caption,{variant:"div",type:"text",size:"s",weight:"medium",children:i})}),(0,n.jsx)(m._v,{children:R})]})}},[N,f,M,I.isReady,R]),w=(0,l.useMemo)(()=>[(0,y.FsJ)(N.checkExperiment(y.peG.WebNextEntityTrailerOnboarding,"on"))],[N]);if(t&&!A&&(0,o.notFound)(),i.landing.isNeededToLoad){let e;e=s.isAuthorized?N.checkExperiment(y.peG.WebNextSwitchMainSkeletons,"on")?d.j.MAIN:d.j.WEB_MAIN:d.j.MAIN_NOLOGIN,(0,l.use)(i.landing.getSkeleton({id:e,showWizard:s.settings.showWizard},{preloadBlocksCount:2}))}return(0,n.jsx)(y.Lh6,{pageId:y.Rhz.HOME,children:(0,n.jsx)(y.kZw,{config:w,children:(0,n.jsx)(E.I7,{scrollElement:j,headerElement:T,children:(0,n.jsxs)(_.t,{className:S().root,containerClassName:S().content,ref:C,...(0,c.BA)(c.Br.main.MAIN_PAGE),children:[U,!O&&(0,n.jsx)(y.Ja5,{blockIdForFrom:y.BEo.RUP_MAIN_RADIO,blockId:y.aUg.RUP,blockType:y.aUg.RUP,blockPosX:0,blockPosY:0,objectsCount:0,children:(0,n.jsx)(x.w,{className:S().vibe})}),(0,n.jsx)(p.Od,{landing:i.landing,headerConcealerComponent:(0,n.jsx)("div",{ref:G}),errorComponent:(0,n.jsx)(v.D,{className:S().error,withBackwardControl:!1}),containerClassName:S().landing,containerStyle:P,blockHeadingVariant:"h2",tabWithHeadingTitle:!0,tabWithCovers:!0,tabWithSubtitle:!0}),(0,n.jsx)(B.$_,{className:S().footer})]})})})})})},63961:function(e,t,i){"use strict";i.d(t,{a:function(){return l},w:function(){return z}});var n,a=i(2685);(n||(n={})).OK="ok";var s=i(90741),o=i(56198);let l=a.V5.model("VibeActions",{meta:a.V5.maybeNull(s.KW),applyingSetting:a.V5.maybeNull(a.V5.string),isLoading:a.V5.boolean,getLastLoadingState:a.V5.enumeration(Object.values(o.Gui)),vibeResetLoadingState:a.V5.enumeration(Object.values(o.Gui))}).views(e=>({get isMyVibe(){return e.meta&&1===e.meta.seeds.length&&e.meta.seeds[0]===o.sHr}})).actions(e=>({getLastVibe:(0,a.ls)(function*(){let{rotorResource:t,modelActionsLogger:i}=(0,a.dU)(e);if(e.getLastLoadingState!==o.Gui.PENDING)try{e.getLastLoadingState=o.Gui.PENDING;let i=yield t.waveLast();e.meta=(0,s.xF)(i),e.getLastLoadingState=o.Gui.RESOLVE}catch(t){i.error(t),e.getLastLoadingState=o.Gui.REJECT}}),vibeReset:(0,a.ls)(function*(){let{rotorResource:t,modelActionsLogger:i}=(0,a.dU)(e);if(e.vibeResetLoadingState!==o.Gui.PENDING)try{e.vibeResetLoadingState=o.Gui.PENDING,(yield t.waveLastReset())===n.OK&&(e.meta=(0,s.xF)({name:"",seeds:[o.sHr],stationId:o.sHr,idForFrom:o.sHr})),e.vibeResetLoadingState=o.Gui.RESOLVE}catch(t){i.error(t),e.vibeResetLoadingState=o.Gui.REJECT}}),setApplyingSetting(t){t?e.applyingSetting=(0,a.pj)(t):e.applyingSetting=null},setIsLoading(t){e.isLoading=t},setVibe(t){e.meta=(0,s.xF)(t)},reset(){e.meta=null,e.vibeResetLoadingState=o.Gui.IDLE,e.getLastLoadingState=o.Gui.IDLE}}));var r=i(65301),c=i(9695),d=i(96233),u=i(99678),g=i(91207),_=i(44729),m=i(55975),b=i(91878),p=i(81437),v=i(89535);let x=(0,g.lazy)(async()=>Promise.all([i.e(525),i.e(2138)]).then(i.bind(i,52138)).then(e=>({default:e.VibeFallbackAnimation}))),h=(0,g.lazy)(async()=>Promise.all([i.e(525),i.e(9202)]).then(i.bind(i,39202)).then(e=>({default:e.VibeAnimation})));var E=i(37184),y=i(78372),B=i(82036),N=i(90598),S=i.n(N);let I=!0,V=(0,d.Pi)(e=>{let{isPlaying:t,onClick:i,ariaDisabled:n,className:a}=e,{vibe:s}=(0,o.oR4)(),{formatMessage:l}=(0,E.Z)(),d=(0,o.k67)(),u=t?"pauseVibe":"playVibe",b=t?m.QM.vibe.MY_VIBE_PAUSE_BUTTON:m.QM.vibe.MY_VIBE_PLAY_BUTTON,p=(0,g.useMemo)(()=>t?l({id:"vibe-actions.aria-label-pause"}):l({id:"vibe-actions.aria-label-play"}),[l,t]),v=(0,g.useCallback)(e=>{s.isLoading||null==i||i(),e.stopPropagation(),e.preventDefault()},[i,s.isLoading]);return(0,g.useEffect)(()=>{if(1===d.length&&I){var e,t;let i=Math.round(performance.now());null===(t=window.Ya)||void 0===t||null===(e=t.Rum)||void 0===e||e.sendTimeMark("my-vibe-button-loading-time",i),I=!1}},[]),(0,r.jsx)(y.z,{className:(0,c.W)(S().root,{[S().root_isLoading]:s.isLoading},a),withRipple:!1,withHover:!1,onClick:v,variant:"text","aria-disabled":s.isLoading||n,"aria-label":p,icon:(0,r.jsx)(B.Icon,{size:"s",className:(0,c.W)(S().icon,S()["icon_".concat(u)]),variant:u}),...(0,m.BA)(b),children:(0,r.jsx)(_.Z,{id:"entity-names.my-vibe"})})}),f=e=>{let{className:t}=e,i=(0,u.useRouter)(),n=(0,o.uK4)().get(o.xit),a=(0,g.useCallback)(()=>{n.authorizationUrl&&i.push(n.authorizationUrl)},[n.authorizationUrl,i]);return(0,r.jsx)(y.z,{onClick:a,className:t,isBlock:!0,color:"primary",variant:"default",size:"l",radius:"xxxl",children:(0,r.jsx)(p.Caption,{variant:"div",size:"l",lineClamp:1,children:(0,r.jsx)(_.Z,{id:"authorization.enter-button"})})})};var R=i(56740),j=i.n(R),C=i(222),T=i(29778),G=i(48887),k=i.n(G);let L=(0,d.Pi)(e=>{var t;let{context:i,onResetClick:n,className:a}=e,{vibe:l,settings:{isMobile:d}}=(0,o.oR4)(),{formatMessage:u}=(0,E.Z)(),g=(0,s.BV)(l.meta),_=i&&!d;return(0,r.jsxs)("div",{className:(0,c.W)(k().root,a),children:[_&&(0,r.jsx)(T.RT,{size:"m",iconSize:"xs",withScaleAnimation:!1,isPinned:null===(t=l.meta)||void 0===t?void 0:t.isPinned,onClick:g,className:k().pinButton}),(0,r.jsx)(C.ap,{}),i&&(0,r.jsxs)("div",{className:(0,c.W)(k().context),...(0,m.BA)(m.QM.vibe.VIBE_CONTEXT),children:[(0,r.jsx)(p.Caption,{variant:"span",type:"controls",size:"m",weight:"medium",lineClamp:1,children:i}),(0,r.jsx)(y.z,{className:k().resetButton,variant:"text",radius:"round",withRipple:!1,icon:(0,r.jsx)(B.Icon,{variant:"close",size:"xxs"}),onClick:n,"aria-label":"".concat(u({id:"vibe-actions.reset-settings"})," ").concat(i),...(0,m.BA)(m.QM.vibe.RESET_VIBE_CONTEXT_BUTTON)})]})]})}),A="vibe-block-controls",z=(0,d.Pi)(e=>{var t,i,n;let{className:a}=e,s=(0,u.useRouter)(),{vibe:l,experiments:d,user:E}=(0,o.oR4)(),[y,B]=(0,b.z)(),{pageId:N}=(0,o.lVB)(),{blockIdForFrom:S}=(0,o.qYG)(),{isFreemium:I}=(0,o.NMB)(),{openPaymentWidgetModal:R,isShimmerActive:C,isShimmerVisible:T,mainText:G,additionText:k}=(0,v.xU)({storeName:"music",isEnabled:I,offerElement:{element:y,intersectionPropertyId:A}}),z=(0,o.uK4)().get(o.xit),{isVibeContext:O,isPlaying:M,togglePlay:P,resetSettings:U}=(0,o.QhE)({seeds:null!==(n=null===(t=l.meta)||void 0===t?void 0:t.seeds)&&void 0!==n?n:[],pageIdForFrom:N,blockIdForFrom:S}),w=d.checkExperiment(o.peG.WebNextDisableVibeSettings,"on")||I||!E.isAuthorized;l.getLastLoadingState===o.Gui.IDLE&&(0,g.use)(l.getLastVibe());let D=(0,g.useCallback)(()=>{O?U():l.vibeResetLoadingState!==o.Gui.PENDING&&l.vibeReset()},[O,l,U]),W=(0,g.useCallback)(()=>{if(!E.isAuthorized){if(!z.authorizationUrl)return;s.push(z.authorizationUrl);return}I&&R()},[E.isAuthorized,z.authorizationUrl,s,I,R]),F=(0,g.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),W()},[W]),Y=(0,g.useCallback)(()=>{if(I||!E.isAuthorized){W();return}P()},[I,E.isAuthorized,P,W]),K=(0,g.useMemo)(()=>d.checkExperiment(o.peG.WebNextShaderFallbackEnabled,"on")?(0,r.jsx)(x,{className:j().vibeAnimation}):(0,r.jsx)(h,{className:j().vibeAnimation}),[d]);return(0,g.useEffect)(()=>()=>{l.reset()},[l]),(0,r.jsxs)("div",{className:(0,c.W)(j().root,{[j().root_freemium]:I||!E.isAuthorized},a),...(0,m.BA)(m.QM.vibe.VIBE_BLOCK),children:[K,(0,r.jsxs)("div",{className:j().controls,onClick:F,ref:B,"data-intersection-property-id":A,children:[(0,r.jsx)(V,{className:j().playButton,isPlaying:M,ariaDisabled:I||!E.isAuthorized,onClick:Y}),!w&&(0,r.jsx)(L,{className:j().settingsButton,context:null===(i=l.meta)||void 0===i?void 0:i.context,onResetClick:D}),(I||!E.isAuthorized)&&(0,r.jsx)(p.Caption,{className:j().subscriptionText,variant:"div",size:"l",children:(0,r.jsx)(_.Z,{id:"vibe-freemium.available-in-plus",values:{br:(0,r.jsx)("br",{})}})}),!E.isAuthorized&&(0,r.jsx)(f,{className:j().button}),I&&(0,r.jsx)(v.CS,{isShimmerActive:C,isShimmerVisible:T,onClick:R,mainText:G,additionText:k,className:j().button})]})]})})},48291:function(e){e.exports={root:"RestrictionBlock_root__P_g9o",restrictions:"RestrictionBlock_restrictions__BhR_r"}},11701:function(e){e.exports={button:"RestrictionButton_button__eLMkU",button_selected:"RestrictionButton_button_selected__LHD20",button_applying:"RestrictionButton_button_applying___ik5f","applying-setting":"RestrictionButton_applying-setting__utqyc",diversityButton:"RestrictionButton_diversityButton__uclSi",diversityButtonImage:"RestrictionButton_diversityButtonImage__21oME",moodEnergy:"RestrictionButton_moodEnergy__q_I4y",moodEnergyButton:"RestrictionButton_moodEnergyButton__yKkaS",moodEnergyButtonImage:"RestrictionButton_moodEnergyButtonImage__zxT2C",textButton:"RestrictionButton_textButton__HC_AE",title:"RestrictionButton_title__UZn0O",specialButton:"RestrictionButton_specialButton__Di6B9",specialImage:"RestrictionButton_specialImage__0E3x2",rippleContainer:"RestrictionButton_rippleContainer__xPANO",ripple:"RestrictionButton_ripple__Rsu8b"}},78996:function(e){e.exports={root:"VibeRestrictions_root__efJez",diversity:"VibeRestrictions_diversity__qfOls",moodEnergy:"VibeRestrictions_moodEnergy__Le0Cy",contextItems:"VibeRestrictions_contextItems__JrF7D"}},73074:function(e){e.exports={root:"VibeSettings_root__ufZlV",popover:"VibeSettings_popover__VKqUc",overlay:"VibeSettings_overlay__pusb4",toggleSettingsButton:"VibeSettings_toggleSettingsButton__j6fIU",header:"VibeSettings_header__OAWe2",actions:"VibeSettings_actions__ckbMt",ripple:"VibeSettings_ripple__kmFX6"}},41856:function(e){e.exports={content:"MainPage_content__kskSM",root:"MainPage_root__STXqc",container:"MainPage_container__CB86l",vibe:"MainPage_vibe__XEBbh",landing:"MainPage_landing___FGNm",beta:"MainPage_beta__y32vb",beta_withReleaseNotes:"MainPage_beta_withReleaseNotes__WOjUk",footer:"MainPage_footer__2rGy2",error:"MainPage_error__u_UCm"}},90598:function(e){e.exports={root:"PlayButton_root__nYKdN",root_isLoading:"PlayButton_root_isLoading__925Sa","applying-setting":"PlayButton_applying-setting__3nbT9",icon:"PlayButton_icon__t_THQ",icon_pauseVibe:"PlayButton_icon_pauseVibe__Ogg_U",icon_playVibe:"PlayButton_icon_playVibe__BKPRh"}},56740:function(e){e.exports={vibeAnimation:"VibeBlock_vibeAnimation__XVEE6",controls:"VibeBlock_controls__BpDFL",root:"VibeBlock_root__z7LtR",root_freemium:"VibeBlock_root_freemium__4i2rV",playButton:"VibeBlock_playButton__6xU55",settingsButton:"VibeBlock_settingsButton__GeMtO",subscriptionText:"VibeBlock_subscriptionText__ODUZN",button:"VibeBlock_button__fWXM_"}},48887:function(e){e.exports={root:"VibeContext_root__dbiNv",context:"VibeContext_context__Z_82k",pinButton:"VibeContext_pinButton__b6SNF",resetButton:"VibeContext_resetButton__9KK4S"}}}]);